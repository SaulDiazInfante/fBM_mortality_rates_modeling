define(["require","exports","tslib","react","classnames","spectrum/tertiary_link","spectrum/tooltip","comments2/components/comment/separator","comments2/components/comment_avatar","comments2/components/comment_editor/comment_editor","comments2/components/comment_editor/components/post_bar","comments2/components/comment_editor/comment_renderer","prop-types"],function(e,t,n,o,a,s,i,r,c,m,l,d,p){"use strict";function u(e){var t=e.actions,n=e.active,a=e.comment,r=a.revisionInfo,c=a.threadId,m=e.localization.intl,l=function(){return t.onClickOlderInfo(r,c)},d=r.timestamp?m.formatMessage({id:"28Dqf",defaultMessage:"On older version ({timestamp})"},{timestamp:m.formatTime(r.timestamp,{day:"numeric",month:"short"})}):m.formatMessage({id:"124aN",defaultMessage:"On older version"});return n&&r.revision?o.createElement(i.Tooltip,{positioning:"above",tooltipContent:m.formatMessage({id:"15HlI",defaultMessage:"View version history"})},o.createElement(s.TertiaryLink,{className:"sc-comment-older-version",onClick:l},d)):o.createElement("div",{className:"sc-comment-older-version"},d)}function f(e){var t=e.comment,n=e.localization,a=e.showRevisionInfo,s=t.author,i=t.id,r=t.revisionInfo,c=t.threadId,m=t.timestamp;return o.createElement("div",{className:"sc-comment-info"},a&&!r.isCurrent&&i==c?o.createElement(u,Object.assign({},e)):null,o.createElement("div",{className:"sc-comment-author-timestamp"},o.createElement("span",{className:"sc-comment-author"},s.name.display),m.getTime()?o.createElement("span",{className:"sc-comment-timestamp"},n.ago(m)):null))}function v(e){var t=e.comment,n=t.id,a=t.revisionInfo,s=t.threadId;return e.showRevisionInfo&&!a.isCurrent&&n==s?o.createElement("div",{className:"sc-comment-info"},o.createElement(u,Object.assign({},e))):null}function E(e){var t=e.comment,n=e.comment.userPermissions,a=n.canEdit,i=n.canDelete,r=e.actions.onDeleted,c=e.isMobile,m=e.active,l=e.onStartEdit,d=e.localization.intl;return!a&&!i||c||!m?null:o.createElement("div",{className:"sc-comment-actions"},a&&o.createElement(s.TertiaryLink,{onClick:function(){return l(t)}},d.formatMessage({id:"1bMft",defaultMessage:"Edit"})),a&&i&&o.createElement("span",{className:"sc-comment-actions-separator"},"â€¢"),i&&o.createElement(s.TertiaryLink,{className:"sc-comment-actions-delete",onClick:r},d.formatMessage({id:"1ddoD",defaultMessage:"Delete"})))}Object.defineProperty(t,"__esModule",{value:!0}),o=n.__importStar(o),a=n.__importDefault(a),p=n.__importStar(p);var h=function(e,t){var n=t.localization.intl;return o.createElement(l.PostBar,Object.assign({},e,{postLabel:n.formatMessage({id:"3BKNX",defaultMessage:"Save"}),cancelLabel:n.formatMessage({id:"2Jfhd",defaultMessage:"Cancel"})}))};h.contextTypes={localization:p.object},t.InlineCommentEditorPostBar=o.memo(h),t.OlderInfo=u,t.ActiveCommentInfo=f,t.InactiveCommentInfo=v,t.CommentActionMenu=E;var g=(function(e){function s(){var t=e.apply(this,arguments)||this;return t.onSave=function(e){t.props.actions.onEdited(e),t.props.onEndEdit()},t.onMentionsQueryUpdated=t.props.actions.onMentionsQueryUpdated,t}return n.__extends(s,e),s.prototype.classNameUtil=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.props,o=n.active,s=void 0!==o&&o,i=n.className,r=n.comment.deleted;return a.default.apply(void 0,[i].concat(e,[{"sc-comment-active":s,"sc-comment-deleted":r}]))},Object.defineProperty(s.prototype,"localization",{get:function(){return this.context.localization},enumerable:!0,configurable:!0}),s.prototype.renderDeletedMode=function(){var e=this.props.children;return o.createElement("li",{className:this.classNameUtil()},o.createElement(c.DeletedCommentAvatar,null),o.createElement("div",{className:"sc-comment-content-container"},o.createElement("div",{className:"sc-comment-content"},e,e&&o.createElement(r.Separator,null),o.createElement("span",{className:"sc-comment-text"},this.localization.intl.formatMessage({id:"ioyQ2",defaultMessage:"This comment was deleted."})))))},s.prototype.renderDisplayMode=function(){var e=this.props,t=e.active,a=void 0!==t&&t,s=e.children,i=e.comment,r=i.content,c=i.author,m=i.revisionInfo,l=e.commentAvatarComponent,p=n.__assign({},this.props,{localization:this.localization});return o.createElement("li",{className:this.classNameUtil("sc-comment-renderer")},o.createElement(d.CommentRenderer,{content:r,author:c,commentAvatarComponent:l,annotation:s,revisionInfo:m},function(e){return o.createElement("div",null,a?o.createElement(f,Object.assign({},p)):o.createElement(v,Object.assign({},p)),e,o.createElement(E,Object.assign({},p)))}))},s.prototype.renderEditMode=function(){var e=this.props,n=e.comment,a=e.mentionsMatches,s=e.onEndEdit;return o.createElement("li",{className:this.classNameUtil("sc-comment-editor","sc-comment-inline-editor")},o.createElement(m.CommentEditor,{author:n.author,content:n.content,postSignalComponent:t.InlineCommentEditorPostBar,onCancel:s,onPost:this.onSave,mentionsMatches:a,onMentionsQueryUpdated:this.onMentionsQueryUpdated,renderBare:!0,shouldFocus:!0}))},s.prototype.render=function(){return this.props.comment.deleted?this.renderDeletedMode():this.props.isEditing?this.renderEditMode():this.renderDisplayMode()},s})(o.PureComponent);t.Comment=g,g.contextTypes={localization:p.object},g.defaultProps={isEditing:!1}});
//# sourceMappingURL=comment.min.js-vflUC80Hv.map