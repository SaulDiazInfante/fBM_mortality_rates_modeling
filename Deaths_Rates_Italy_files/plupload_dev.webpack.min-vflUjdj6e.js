define(["external/mOxie"],function(e){return(function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=0)})({"./plupload_dev-2.0.0.js":function(e,t,r){var n=r("external/mOxie");(function(e,t,r){function n(e){function t(e,t,r){var i={chunks:"slice_blob",resize:"send_binary_string",jpgresize:"send_binary_string",pngresize:"send_binary_string",progress:"report_upload_progress",multi_selection:"select_multiple",max_file_size:"access_binary",dragdrop:"drag_and_drop",drop_element:"drag_and_drop",headers:"send_custom_headers",canSendBinary:"send_binary",triggerDialog:"summon_file_dialog"};i[e]?n[i[e]]=t:r||(n[e]=t)}var r=e.required_features,n={};return"string"==typeof r?o.each(r.split(/\s*,\s*/),function(e){t(e,!0)}):"object"==typeof r?o.each(r,function(e,r){t(r,e)}):r===!0&&(e.multipart||(n.send_binary_string=!0),e.chunk_size>0&&(n.slice_blob=!0),o.each(e,function(e,r){t(r,!!e,!0)})),n}var i=e.setTimeout,s={},o={VERSION:"2.0.0beta",STOPPED:1,STARTED:2,QUEUED:1,UPLOADING:2,COMMITTING:3,FAILED:4,DONE:5,GENERIC_ERROR:-100,HTTP_ERROR:-200,IO_ERROR:-300,SECURITY_ERROR:-400,INIT_ERROR:-500,FILE_SIZE_ERROR:-600,FILE_EXTENSION_ERROR:-601,FILE_DUPLICATE_ERROR:-602,IMAGE_FORMAT_ERROR:-700,IMAGE_MEMORY_ERROR:-701,IMAGE_DIMENSIONS_ERROR:-702,OVER_QUOTA_ERROR:-708,BLOCKS_MISSING_ERROR:-703,COMMIT_HTTP_ERROR:-704,UPLOAD_BLOCK_ERROR:-705,CHUNKS_NOT_ENABLED_ERROR:-706,SERVER_HASH_RESPONSE_ERROR:-707,BLOCK_RUNTIME_ID_MISSING:-709,CLIENT_HASH_EMPTY_ERROR:-710,SERVER_HASH_EMPTY_ERROR:-711,HASHES_NOT_EQUAL_ERROR:-712,BLOCK_INDEX_ERROR:-713,BLOCK_EMPTY_ERROR:-714,BLOB_EMPTY_ERROR:-715,CLIENT_HASH_DIGEST_ERROR:-716,FILE_READER_NULL_RESULT_ERROR:-717,COMMIT_READINESS_ERROR:-718,SERVER_RESPONSE_ERROR:-719,SERVER_TOKEN_EMPTY_ERROR:-720,BLOB_MISSING_ERROR:-721,SERVER_TOKENS_MISSING_ERROR:-722,mimeTypes:t.mimes,ua:t.ua,typeOf:t.typeOf,extend:t.extend,guid:t.guid,each:t.each,getPos:t.getPos,getSize:t.getSize,xmlEncode:function(e){var t={"<":"lt",">":"gt","&":"amp",'"':"quot","'":"#39"};return e?(""+e).replace(/[<>&\"\']/g,function(e){return t[e]?"&"+t[e]+";":e}):e},toArray:t.toArray,inArray:t.inArray,addI18n:t.addI18n,translate:t.translate,isEmptyObj:t.isEmptyObj,hasClass:t.hasClass,addClass:t.addClass,removeClass:t.removeClass,getStyle:t.getStyle,addEvent:t.addEvent,removeEvent:t.removeEvent,removeAllEvents:t.removeAllEvents,cleanName:function(e){var t,r;for(r=[/[\300-\306]/g,"A",/[\340-\346]/g,"a",/\307/g,"C",/\347/g,"c",/[\310-\313]/g,"E",/[\350-\353]/g,"e",/[\314-\317]/g,"I",/[\354-\357]/g,"i",/\321/g,"N",/\361/g,"n",/[\322-\330]/g,"O",/[\362-\370]/g,"o",/[\331-\334]/g,"U",/[\371-\374]/g,"u"],t=0;t<r.length;t+=2)e=e.replace(r[t],r[t+1]);return e=e.replace(/\s+/g,"_"),e=e.replace(/[^a-z0-9_\-\.]+/gi,"")},buildUrl:function(e,t){var r="";return o.each(t,function(e,t){r+=(r?"&":"")+encodeURIComponent(t)+"="+encodeURIComponent(e)}),r&&(e+=(e.indexOf("?")>0?"&":"?")+r),e},formatSize:function(e){return void 0===e||/\D/.test(e)?o.translate("N/A"):e>1099511627776?Math.round(e/1099511627776,1)+" "+o.translate("tb"):e>1073741824?Math.round(e/1073741824,1)+" "+o.translate("gb"):e>1048576?Math.round(e/1048576,1)+" "+o.translate("mb"):e>1024?Math.round(e/1024,1)+" "+o.translate("kb"):e+" "+o.translate("b")},parseSize:t.parseSizeStr,predictRuntime:function(e,t){var r,n;return t&&(e.runtimes=t),r=new o.Uploader(e),n=r.runtime,r.destroy(),n},addFileFilter:function(e,t){s[e]=t}};o.addFileFilter("mime_types",(function(){function e(e){var t=[];return o.each(e,function(e){o.each(e.extensions.split(/,/),function(e){/^\s*\*\s*$/.test(e)?t.push("\\.*"):t.push("\\."+e.replace(new RegExp("["+"/^$.*+?|()[]{}\\".replace(/./g,"\\$&")+"]","g"),"\\$&"))})}),new RegExp("("+t.join("|")+")$","i")}var t,r;return function(n,i,s){r&&n==t||(r=e(n),t=[].slice.call(n)),r.test(i.name)?s(!0):(this.trigger("Error",{code:o.FILE_EXTENSION_ERROR,message:o.translate("File extension error."),file:i}),s(!1))}})()),o.addFileFilter("max_file_size",function(e,t,r){void 0!==t.size&&e&&t.size>e?(this.trigger("Error",{code:o.FILE_SIZE_ERROR,message:o.translate("File size error."),file:t}),r(!1)):r(!0)}),o.addFileFilter("prevent_duplicates",function(e,t,r){if(e)for(var n=this.files.length;n--;)if(t.name===this.files[n].name&&t.size===this.files[n].size)return this.trigger("Error",{code:o.FILE_DUPLICATE_ERROR,message:o.translate("Duplicate file error."),file:t}),void r(!1);r(!0)}),o.Uploader=function(r){function a(){var e,t,n=0;if(r.waterfall_parallel_uploads)for(t=0;t<h.length;t++)if(h[t].status==o.UPLOADING)return;if(this.state==o.STARTED){for(t=0;t<h.length;t++)e||h[t].status!=o.QUEUED?n++:(e=h[t],this.trigger("BeforeUpload",e)&&(e.status=o.UPLOADING,this.trigger("UploadFile",e)));n==h.length&&(this.state!==o.STOPPED&&(this.state=o.STOPPED,this.trigger("StateChanged")),this.trigger("UploadComplete",h))}}function l(e){e.percent=e.size>0?Math.ceil(e.loaded/e.size*100):100,u()}function u(){var e,t;for(p.reset(),e=0;e<h.length;e++)t=h[e],void 0!==t.size?(p.size+=t.origSize,p.loaded+=t.loaded*t.origSize/t.size):p.size=void 0,t.status==o.DONE?p.uploaded++:t.status==o.FAILED?p.failed++:p.queued++;void 0===p.size?p.percent=h.length>0?Math.ceil(p.uploaded/h.length*100):0:(p.bytesPerSec=Math.ceil(p.loaded/((+new Date-g||1)/1e3)),p.percent=p.size>0?Math.ceil(p.loaded/p.size*100):0)}function d(){var e=this,n=0,i={accept:r.filters.mime_types,runtime_order:r.runtimes,required_caps:S,swf_url:r.flash_swf_url,xap_url:r.silverlight_xap_url};o.each(r.runtimes.split(/\s*,\s*/),function(e){r[e]&&(i[e]=r[e])}),t.inSeries([function(s){r.browse_button?(m=new t.FileInput(o.extend({},i,{name:r.file_data_name,multiple:r.multi_selection,container:r.container,browse_button:r.browse_button})),m.onready=function(){var r=t.Runtime.getInfo(this.ruid);t.extend(e.features,{chunks:r.can("slice_blob"),multipart:r.can("send_multipart"),multi_selection:r.can("select_multiple")}),n++,s()},m.onchange=function(){e.trigger("BeforeFilesAdded",this.files)&&e.addFile(this.files)},m.bind("mouseenter mouseleave mousedown mouseup",function(e){if(!y){var n=t.get(r.browse_button);n&&(r.browse_button_hover&&("mouseenter"===e.type?t.addClass(n,r.browse_button_hover):"mouseleave"===e.type&&t.removeClass(n,r.browse_button_hover)),r.browse_button_active&&("mousedown"===e.type?t.addClass(n,r.browse_button_active):"mouseup"===e.type&&t.removeClass(n,r.browse_button_active)),n=null)}}),m.bind("mousedown",function(){e.trigger("Browse")}),m.bind("error runtimeerror",function(){m=null,s()}),m.init()):s()},function(s){r.drop_element?(R=new t.FileDrop(o.extend({},i,{drop_zone:r.drop_element})),R.onready=function(){var r=t.Runtime.getInfo(this.ruid);e.features.dragdrop=r.can("drag_and_drop"),n++,s()},R.ondrop=function(){e.trigger("DragAndDrop"),e.addFile(this.files)},R.bind("error runtimeerror",function(){R=null,s()}),R.init()):s()}],function(){"function"==typeof r.init?r.init(e):o.each(r.init,function(t,r){e.bind(r,t)}),n?e.trigger("PostInit"):e.trigger("Error",{code:o.INIT_ERROR,message:o.translate("Init error.")})})}function c(e,r){if(e.ruid){var n=t.Runtime.getInfo(e.ruid);if(n)return n.can(r)}return!1}function f(e,r,n){var i=new t.Image;try{i.onload=function(){i.downsize(r.width,r.height,r.crop,r.preserve_headers)},i.onresize=function(){n(this.getAsBlob(e.type,r.quality)),this.destroy()},i.onerror=function(){n(e)},i.load(e)}catch(t){n(e)}}var _,g,p,m,R,E,h=[],b={},v=!1,O={},S={},y=!1;p=new o.QueueProgress,r=o.extend({runtimes:t.Runtime.order,max_retries:0,multipart:!0,multi_selection:!0,file_data_name:"file",flash_swf_url:"js/Moxie.swf",silverlight_xap_url:"js/Moxie.xap",send_chunk_number:!0},r),r.resize&&(r.resize=o.extend({preserve_headers:!0,crop:!1},r.resize)),"array"===o.typeOf(r.filters)&&(r.filters={mime_types:r.filters}),r.filters=o.extend({mime_types:[],prevent_duplicates:!!r.prevent_duplicates,max_file_size:r.max_file_size},r.filters),r.filters.max_file_size=o.parseSize(r.filters.max_file_size)||0,r.chunk_size=o.parseSize(r.chunk_size)||0,r.required_features=S=n(o.extend({},r)),o.extend(this,{id:o.guid(),state:o.STOPPED,features:{},runtime:t.Runtime.thatCan(S,r.runtimes),files:h,settings:r,total:p,init:function(){function n(e){Object.keys(e).forEach(function(t){e[t].abort()})}function s(){n(b),b={}}var p=this;if(r.browse_button=t.get(r.browse_button),r.drop_element=t.get(r.drop_element),"function"==typeof r.preinit?r.preinit(p):o.each(r.preinit,function(e,t){p.bind(t,e)}),!r.browse_button||!r.url)return void this.trigger("Error",{code:o.INIT_ERROR,message:o.translate("Init error.")});p.bind("FilesAdded",function(e,t){[].push.apply(h,t),i(function(){p.trigger("QueueChanged"),p.refresh()},1)}),p.bind("CancelUpload",function(){r.waterfall_parallel_uploads?(_&&_.abort(),v=!0,s()):E&&E.abort()}),r.unique_names&&p.bind("BeforeUpload",function(e,t){var r=t.name.match(/\.([^.]+)$/),n="part";r&&(n=r[1]),t.target_name=t.id+"."+n}),p.bind("UploadFile",function(a,l){function u(){507!==E.status&&O-- >0?i(d,1):(l.loaded=y,a.trigger("Error",{code:o.HTTP_ERROR,message:o.translate("HTTP Error."),file:l,response:E.responseText,status:E.status,responseHeaders:E.getAllResponseHeaders()}))}function d(){var e,n,s,c;l.status!=o.DONE&&l.status!=o.FAILED&&a.state!=o.STOPPED&&(s={name:l.target_name||l.name},h&&R.chunks&&p.size>h?(c=Math.min(h,p.size-y),e=p.slice(y,y+c)):(c=p.size,e=p),h&&R.chunks?r.send_chunk_number?(s.chunk=Math.ceil(y/h),s.chunks=Math.ceil(p.size/h)):(s.offset=y,s.total=p.size):(s.chunk=0,s.chunks=1),E=new t.XMLHttpRequest,E.withCredentials=!0,E.upload&&(E.upload.onprogress=function(e){l.loaded=Math.min(l.size,y+e.loaded),a.trigger("UploadProgress",l,!0)}),E.onload=function(){if(E.status>=400)return void u();c<p.size?(e.destroy(),y+=c,l.loaded=Math.min(y,p.size),a.trigger("ChunkUploaded",l,{offset:l.loaded,total:p.size,response:E.responseText,status:E.status,responseHeaders:E.getAllResponseHeaders()}),"Android Browser"===t.Env.browser&&a.trigger("UploadProgress",l,!0)):l.loaded=l.size,e=n=null,!y||y>=p.size?(l.size!=l.origSize&&(p.destroy(),p=null),a.trigger("UploadProgress",l,!0),l.status=o.DONE,a.trigger("FileUploaded",l,{response:E.responseText,status:E.status,responseHeaders:E.getAllResponseHeaders()})):(O=r.max_retries,i(d,1))},E.onerror=function(){u()},E.onloadend=function(){this.destroy(),E=null},a.settings.multipart&&R.multipart?(s.name=l.target_name||l.name,E.open("post",m,!0),o.each(a.settings.headers,function(e,t){E.setRequestHeader(t,e)}),n=new t.FormData,o.each(o.extend(s,a.settings.multipart_params),function(e,t){n.append(t,e)}),n.append(a.settings.file_data_name,e),E.send(n,{runtime_order:a.settings.runtimes,required_caps:S,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})):(m=o.buildUrl(a.settings.url,o.extend(s,a.settings.multipart_params)),E.open("post",m,!0),E.setRequestHeader("Content-Type","application/octet-stream"),o.each(a.settings.headers,function(e,t){E.setRequestHeader(t,e)}),E.send(e,{runtime_order:a.settings.runtimes,required_caps:S,swf_url:a.settings.flash_swf_url,xap_url:a.settings.silverlight_xap_url})))}function g(){function r(e){var t;if(w<=h)t=p;else{var r=e*h,n=Math.min(h,w-r);t=p.slice(r,r+n)}return t&&0!==t.size?t:(s(),void a.trigger("Error",{code:o.BLOCK_EMPTY_ERROR,message:o.translate("Block is empty."),file:l,blockIndex:e}))}function u(){return P===D&&U.length===D&&!U.includes(void 0)}function d(e){for(;e.endsWith("=");)e=e.slice(0,-1);return e}function c(e){return e.replace(/\//g,"_").replace(/\+/g,"-")}function f(e){function t(n){var i=r(n);if(!i.ruid)return s(),void a.trigger("Error",{code:o.BLOCK_RUNTIME_ID_MISSING_ERROR,message:o.translate("Block ruid missing."),file:l});i.connectRuntime(i.ruid);var u=new FileReader;_=u,u.onloadend=function(r){if(!r.target.result&&!v)return s(),void a.trigger("Error",{code:o.FILE_READER_NULL_RESULT_ERROR,message:o.translate("File reader null result."),file:l,blockIndex:n,domException:u.error});var f=crypto.subtle.digest("SHA-256",r.target.result);i.disconnectRuntime(),f.then(function(r){var i=btoa(String.fromCharCode.apply(null,new Uint8Array(r))),u=c(i);if(u=d(u),!u&&!v)return s(),void a.trigger("Error",{code:o.CLIENT_HASH_EMPTY_ERROR,message:o.translate("Client hash empty or undefined error."),file:l});N[n]=u,n++,l.loaded+=1e4,a.trigger("UploadProgress",l,!1),n>=D?(l.loaded=0,e()):t(n)}).catch(function(e){if(!v)return s(),void a.trigger("Error",{code:o.CLIENT_HASH_DIGEST_ERROR,message:o.translate(e),file:l,blockIndex:n})})};var f=i.getSource();u.readAsArrayBuffer(f)}t(0)}function g(){for(var e=0;e<6&&e<D;e++)A=e,O(e)}function E(e,t){if(!(507!==t.status&&M[e]<a.settings.max_retries))return l.loaded=0,s(),void a.trigger("Error",{code:o.UPLOAD_BLOCK_ERROR,message:o.translate("Upload block HTTP error."),file:l,response:t.responseText,status:t.status,responseHeaders:t.getAllResponseHeaders()});i(function(){O(e)},2e3),M[e]++}function O(e){var n=r(e),i=new t.XMLHttpRequest;i.withCredentials=!0;var d={};a.settings.multipart_params.file_request?d.owner_id=a.settings.multipart_params.owner_id:(d.owner_id=a.settings.multipart_params._subject_uid,d._subject_uid=a.settings.multipart_params._subject_uid),d.t=a.settings.multipart_params.t,d.reported_block_size=n.size,d.num_blocks=D,d.ns_id_for_routing=a.settings.multipart_params.ns_id_for_routing;var c=0;i.upload?i.upload.onprogress=function(e){e.loaded&&(l.loaded+=e.loaded-c,c=e.loaded,a.trigger("UploadProgress",l,!0))}:i.onreadystatechange=function(){i.readyState===XMLHttpRequest.DONE&&200===i.status&&(l.loaded+=n.size,a.trigger("UploadProgress",l,!0))},i.onload=function(){if(i.status>=400)return void E(e,i);var t,r,n;try{t=JSON.parse(i.response),r=t.block_hash,n=t.token}catch(t){return s(),void a.trigger("Error",{code:o.SERVER_RESPONSE_ERROR,message:o.translate("Server response error."),file:l,blockIndex:e})}if(!r)return s(),void a.trigger("Error",{code:o.SERVER_HASH_EMPTY_ERROR,message:o.translate("Server hash empty or undefined error."),file:l,blockIndex:e});if(!n)return s(),void a.trigger("Error",{code:o.SERVER_TOKEN_EMPTY_ERROR,message:o.translate("Server token empty or undefined error."),file:l,blockIndex:e});if(x){if(r!==N[e])return s(),void a.trigger("Error",{code:o.HASHES_NOT_EQUAL_ERROR,message:o.translate("Client and server hashes not equal error."),file:l,blockIndex:e});U[e]=n,P++,delete b[e]}else U[e]=n,P++,delete b[e];if(A<L)A++,O(A);else{if(A>L)return s(),void a.trigger("Error",{code:o.BLOCK_INDEX_ERROR,message:o.translate("Block index error."),file:l,blockIndex:e});if(u())a.settings.parallel_commit_and_upload&&(a.trigger("FileBlocksUploaded",l),l.status=o.COMMITTING),z(U);else if(A===L&&!Object.keys(b).length&&!u())return s(),void a.trigger("Error",{code:o.COMMIT_READINESS_ERROR,message:o.translate("Done iterating over blocks, but no requests in progress or outstanding and not ready to commit."),file:l})}},i.onerror=function(){E(e,i)},i.onloadend=function(){delete b[e],this.destroy(),i=null},m=o.buildUrl(a.settings.waterfall_upload_block_url,d),i.open("post",m,!0),i.setRequestHeader("Content-Type","application/octet-stream"),o.each(a.settings.headers,function(e,t){i.setRequestHeader(t,e)}),b[e]=i,i.send(n),M[e]++}function S(e,t){y(t,e.responseText,e.status,e.getAllResponseHeaders())}function y(e,t,r,s){if(!(507!==r&&C<a.settings.max_retries))return l.loaded=0,n(b),b={},void a.trigger("Error",{code:o.COMMIT_HTTP_ERROR,message:o.translate("Commit HTTP error."),file:l,response:t,status:r,responseHeaders:s});i(function(){z(e)},8e3),C++}function I(e){T(e.responseText,e.status,e.getAllResponseHeaders())}function T(e,t,r){l.size!=l.origSize&&(p.destroy(),p=null),a.trigger("UploadProgress",l,!0),l.status=o.DONE,a.trigger("FileUploaded",l,{response:e,status:t,responseHeaders:r}),b={}}function z(e){if("function"==typeof a.settings.send_commit_request)return a.settings.send_commit_request(a,l,e).then(function(e){T()}).catch(function(t){t.raw?y(e,t.raw.responseBody,t.raw.status):y(e)}),void C++;var r=new t.XMLHttpRequest;r.withCredentials=!0;var n={};if(a.settings.multipart_params.file_request?(n.ut=a.settings.multipart_params.ut,n.token=a.settings.multipart_params.token,n.submitted_email=a.settings.multipart_params.submitted_email,n.submitted_user_name=a.settings.multipart_params.submitted_user_name,n.user_id=a.settings.multipart_params.owner_id):(n._subject_uid=a.settings.multipart_params._subject_uid,n.dest=a.settings.multipart_params.dest,n.overwrite=a.settings.multipart_params.overwrite),n.reported_total_size=a.settings.multipart_params.reported_total_size,n.name=l.target_name||l.name,n.t=a.settings.multipart_params.t,r.onload=function(){if(r.status>=400)return void S(r,e);r.readyState===XMLHttpRequest.DONE&&200===r.status&&I(r)},r.onerror=function(){S(r,e)},r.onloadend=function(){b={},this.destroy(),r=null},m=o.buildUrl(a.settings.waterfall_commit_upload_url,n),r.open("post",m,!0),r.setRequestHeader("Content-Type","application/octet-stream"),o.each(a.settings.headers,function(e,t){r.setRequestHeader(t,e)}),b.commitRequest=r,1!==Object.keys(b).length||!b.hasOwnProperty("commitRequest"))return s(),void a.trigger("Error",{code:o.COMMIT_READINESS_ERROR,message:o.translate("In commitFile call, but more than 1 request in progress or requestsInProgress map lacks the commit request."),file:l});r.send(JSON.stringify(e)),C++}if(!p)return void a.trigger("Error",{code:o.BLOB_MISSING_ERROR,message:o.translate("Blob is missing."),file:l});var w=p.size;if(!p.size)return void a.trigger("Error",{code:o.BLOB_EMPTY_ERROR,message:o.translate("Blob size is 0 bytes."),file:l});if(l.status!=o.DONE&&l.status!=o.FAILED&&a.state!=o.STOPPED){if(!R.chunks)return void a.trigger("Error",{code:o.CHUNKS_NOT_ENABLED_ERROR,message:o.translate("Chunks not enabled error."),file:l});for(var A,x=!!(e.crypto&&e.crypto.subtle&&e.crypto.subtle.digest),D=Math.ceil(w/h),P=0,M=[],C=0,N=[],U=[],L=D-1,F=0;F<D;F++)U.push(void 0),N.push(void 0),M.push(0);x?f(function(){g()}):g()}}var p,m=a.settings.url,R=a.features,h=r.chunk_size,O=r.max_retries,y=0;l.loaded&&(y=l.loaded=h*Math.floor(l.loaded/h)),p=l.getSource(),!t.isEmptyObj(a.settings.resize)&&c(p,"send_binary_string")&&~t.inArray(p.type,["image/jpeg","image/png"])?f.call(this,p,a.settings.resize,function(e){p=e,l.size=e.size,r.waterfall_parallel_uploads?g():d()}):r.waterfall_parallel_uploads?g():d()}),p.bind("UploadProgress",function(e,t,r){l(t)}),p.bind("StateChanged",function(e){if(e.state==o.STARTED)g=+new Date;else if(e.state==o.STOPPED)for(var t=e.files.length-1;t>=0;t--)e.files[t].status==o.UPLOADING&&(e.files[t].status=o.QUEUED,u())}),p.bind("QueueChanged",u),p.bind("Error",function(e,t){t.file&&(t.file.status=o.FAILED,l(t.file),e.state==o.STARTED&&i(function(){a.call(p)},1))});const m=function(){u(),i(function(){a.call(p)},1)};p.settings.parallel_commit_and_upload?p.bind("FileBlocksUploaded",m):p.bind("FileUploaded",m),p.trigger("Init",{runtime:this.runtime}),d.call(this)},refresh:function(){m&&m.trigger("Refresh"),this.trigger("Refresh")},start:function(){this.state!=o.STARTED&&(this.state=o.STARTED,this.trigger("StateChanged"),a.call(this))},stop:function(){this.state!=o.STOPPED&&(this.state=o.STOPPED,this.trigger("StateChanged"),this.trigger("CancelUpload"))},disableBrowse:function(){y=void 0===arguments[0]||arguments[0],m&&m.disable(y),this.trigger("DisableBrowse",y)},getFile:function(e){var t;for(t=h.length-1;t>=0;t--)if(h[t].id===e)return h[t]},addFile:function(e,r){function n(){var e=R||m;return!!e&&e.getRuntime().uid}function a(e,r){var n=[];t.each(d.settings.filters,function(t,r){s[r]&&n.push(function(n){s[r].call(d,t,e,function(e){n(!e)})})}),t.inSeries(n,r)}function l(e){var n=t.typeOf(e);if(e instanceof t.File){if(!e.ruid&&!e.isDetached()){if(!u)return!1;e.ruid=u,e.connectRuntime(u)}const s=new o.File(e);s.batchId=e.batchId,s.chooserType=e.chooserType,l(s)}else if(e instanceof t.Blob)l(e.getSource()),e.destroy();else if(e instanceof o.File)r&&(e.dest=r),c.push(function(t){a(e,function(r){r||f.push(e),i(t,1)})});else if(t.inArray(n,["file","blob"])!==-1){const d=new t.File(null,e);d.batchId=e.batchId,d.chooserType=e.chooserType,l(d)}else"node"===n&&"filelist"===t.typeOf(e.files)?t.each(e.files,l):"array"===n&&t.each(e,l)}var u,d=this,c=[],f=[];u=n(),l(e),c.length&&t.inSeries(c,function(){f.length&&d.trigger("FilesAdded",f)})},removeFile:function(e){for(var t="string"==typeof e?e:e.id,r=h.length-1;r>=0;r--)if(h[r].id===t)return this.splice(r,1)[0]},renameFile:function(e,t){for(var r="string"==typeof e?e:e.id,n=h.length-1;n>=0;n--)if(h[n].id===r)return h[n].name=t,void(h[n].dest=t)},splice:function(e,t){var r=h.splice(void 0===e?0:e,void 0===t?h.length:t);return this.trigger("FilesRemoved",r),this.trigger("QueueChanged"),o.each(r,function(e){e.destroy()}),r},trigger:function(e){var t,r,n=O[e.toLowerCase()];if(n)for(r=Array.prototype.slice.call(arguments),r[0]=this,t=0;t<n.length;t++)if(n[t].func.apply(n[t].scope,r)===!1)return!1;return!0},hasEventListener:function(e){return!!O[e.toLowerCase()]},bind:function(e,t,r){var n;e=e.toLowerCase(),n=O[e]||[],n.push({func:t,scope:r||this}),O[e]=n},unbind:function(e){e=e.toLowerCase();var t,r=O[e],n=arguments[1];if(r){if(void 0!==n){for(t=r.length-1;t>=0;t--)if(r[t].func===n){r.splice(t,1);break}}else r=[];r.length||delete O[e]}},unbindAll:function(){var e=this;o.each(O,function(t,r){e.unbind(r)})},destroy:function(){this.stop(),o.each(h,function(e){e.destroy()}),h=[],m&&(m.destroy(),m=null),R&&(R.destroy(),R=null),S={},g=p=y=E=null,this.trigger("Destroy"),this.unbindAll(),O={}}})},o.File=(function(){function e(e){o.extend(this,{id:o.guid(),name:e.name||e.fileName,dest:"",type:e.type||"",size:e.size||e.fileSize,origSize:e.size||e.fileSize,loaded:0,percent:0,status:o.QUEUED,lastModifiedDate:e.lastModifiedDate||(new Date).toLocaleString(),getNative:function(){var e=this.getSource().getSource();return t.inArray(t.typeOf(e),["blob","file"])!==-1?e:null},getSource:function(){return r[this.id]?r[this.id]:null},destroy:function(){var e=this.getSource();e&&(e.destroy(),delete r[this.id])}}),r[this.id]=e}var r={};return e})(),o.QueueProgress=function(){var e=this;e.size=0,e.loaded=0,e.uploaded=0,e.failed=0,e.queued=0,e.percent=0,e.bytesPerSec=0,e.reset=function(){e.size=e.loaded=e.uploaded=e.failed=e.queued=e.percent=e.bytesPerSec=0}},e.plupload=o})(window,n),e.exports=window.plupload},0:function(e,t,r){e.exports=r("./plupload_dev-2.0.0.js")},"external/mOxie":function(t,r){t.exports=e}})});
//# sourceMappingURL=plupload_dev.webpack.min.js-vflZOEjMc.map