define(["require","exports","tslib","external/lodash","modules/clean/logging/hive/schemas/web-modal-activity","modules/clean/react/async_fileops_modals","modules/clean/react/async_overquota_modal_controller","modules/clean/react/browse/action_logger","modules/clean/react/browse/actions","modules/clean/react/browse/file_actions/file_action_helpers","modules/clean/react/browse/logger_util","modules/clean/react/fileops_actions","modules/clean/react/folder_dialog/api","modules/clean/react/folder_dialog/constants","modules/clean/web_user_action_events","modules/core/i18n"],function(e,o,t,s,n,r,l,c,a,i,u,d,_,m,p,f){"use strict";function g(){l.showOverquota("wb_oq_mv_cp")}function v(e,o){var t=o.isOverFreeQuota,s=o.hasExcludedNsIds,n=o.copyItemDisabled,r=t&&!s?g:F(e);return{label:f._("Copy"),performAction:r,disabled:n,iconName:"copy",className:"action-copy",key:"copy"}}Object.defineProperty(o,"__esModule",{value:!0}),s=t.__importStar(s),r=t.__importStar(r),l=t.__importStar(l),c=t.__importStar(c),u=t.__importStar(u),d=t.__importStar(d);var F=function(e){return function(){var o=e.user,l=e.files,f=e.firstFile,g=e.isSearchMode,v=e.source,F=e.viewType,w=e.context,y=e.useSearchSuccessBanner,S=e.expBrowseSuccessBanner,b=e.expListSubfoldersWithOdyssey,h=e.expCopyUseApiV2,C=l.toArray();i.logUserEventOnFile({result:f,args:e,action_type:p.WebUserActionLogEvent.OPEN_COPY_MODAL}),i.showRetrievalSuccessBanner(y,g,S,p.WebUserActionLogEvent.OPEN_COPY_MODAL);var O={user:o,files:C,onSuccess:function(e){var t=u.countFilesAndFolders(l),s=t.num_files_selected,n=t.num_folders_selected;c.logCopyFiles({uid:o.id,source:v,view_type:F,result:f,num_files_selected:s,num_folders_selected:n}),a.browseActions.selectRowsFromBoltClient(e)},onRequestNotSent:function(){a.browseActions.selectFilesByFqPath({fqPathsToSelect:C.map(function(e){return e.fq_path})})},onUndo:function(){a.browseActions.selectRowsFromBoltClient(C)}},A=b?_.getFolderContentsAPIv2:_.getFolderContents;r.showMoveDialog({operation:m.Operation.COPY,modalName:n.ModalName.COPY,user:o,entries:C,initialFolderSelection:w.currentFQPath,apiClient:{moveToFolder:function(e){var o=t.__assign({},O,{newPath:e,checkFSWs:!0,useApiV2:h});return d.copyFiles(o),Promise.resolve()},getFolderContents:A,getFolderSuggestion:_.getFolderSuggestion},onSuccess:s.noop,onCancel:s.noop,showFolderSuggestion:!0,createNewFolderInMoveDialog:!0})}};o.getCopyItem=v});
//# sourceMappingURL=copy.min.js-vflK6Hadt.map