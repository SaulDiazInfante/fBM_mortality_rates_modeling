define("modules/clean/avatar/list",["require","exports","tslib","external/classnames","react","external/react-dom-factories","external/prop-types","modules/clean/avatar/overflow_count_pill","modules/clean/avatar/size","modules/clean/react/css"],function(e,t,o,i,n,r,l,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importDefault(n),r=o.__importStar(r),l=o.__importStar(l),a=o.__importDefault(a);var d=n.default.createElement,u=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._defaultRenderOverflowCount=function(e){var o=e.overflowCount;return d(a.default,{count:o,dimension:t.props.avatarDimension,key:"overflow_pill:"+o,onClick:t.props.onOverflowCountClick})},t.getClassName=function(){return i.default(["horizontal-avatar-list",t.props.className,t.props.animation?["animation","is-animated"]:null])},t}return o.__extends(t,e),t.prototype.render=function(){var e=this.props.avatars,t=this.props.maxVisible,o=0;if(this.props.undisplayableCount&&(o+=this.props.undisplayableCount),(this.props.undisplayableCount||e.length>t)&&(t--,o+=e.length-t,e=e.slice(0,t)),o){var n=null!=this.props.overflowCountRenderer?this.props.overflowCountRenderer:this._defaultRenderOverflowCount;e.push(n({overflowCount:o,avatarArgs:{avatarDimension:this.props.avatarDimension,onAvatarClick:this.props.onOverflowCountClick,titleButtonDirection:"south"}}))}return r.div({className:i.default({"c-facepile":!0})},[r.div({className:this.getClassName(),key:"facepile"},e)])},t.displayName="HorizontalAvatarList",t.propTypes={avatars:l.array.isRequired,avatarDimension:l.oneOf(s.VALID_AVATAR_DIMENSIONS).isRequired,maxVisible:l.number.isRequired,undisplayableCount:l.number.isRequired,onOverflowCountClick:l.func,overflowCountRenderer:l.func,animation:l.bool,className:l.string},t.defaultProps={className:""},t})(n.default.Component);t.default=c.requireCssWithComponent(u,["/static/css/avatar_list-vflkDtz7i.css"])}),define("modules/clean/avatar/shared_link_avatar",["require","exports","tslib","react","external/react-dom-factories","external/prop-types","modules/clean/avatar/size","modules/clean/avatar/style","modules/clean/css","modules/clean/static_urls","modules/core/i18n"],function(e,t,o,i,n,r,l,a,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importStar(n),r=o.__importStar(r),s=o.__importStar(s);var u=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){return s.require_css("/static/css/scooter/scooter-scoped-vflFpCY2P.css")},t.prototype.render=function(){var e=n.img({src:c.static_url("/static/images/avatar/shared-link-icon-vflHCU_m6.svg"),alt:this.props.alt||d._("Shared link"),width:12,className:"u-mar-horizontal-xs"}),t=["c-avatar--meta"];null!=this.props.optionalClass&&t.push(this.props.optionalClass),null!=this.props.onClick&&t.push("u-unbutton");var o=a.getClassName(this.props.dimension,t);return null!=this.props.onClick?n.button({className:o,onClick:this.props.onClick},e):n.div({className:o,onClick:this.props.onClick},e)},t.displayName="SharedLinkAvatar",t.propTypes={alt:r.string,dimension:r.oneOf(l.VALID_AVATAR_DIMENSIONS).isRequired,onClick:r.func,optionalClass:r.string},t})(i.default.Component);t.default=u});var __importStar=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var o in e)Object.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t.default=e,t};define("modules/clean/react/file_viewer/async_controller",["require","exports"],function(e,t){"use strict";function o(){Array.from(document.querySelectorAll(r)).forEach(function(e){e.style.display&&e.setAttribute("data-preview-old-display",e.style.display),e.style.display="none"})}function i(){Array.from(document.querySelectorAll(r)).forEach(function(e){e.style.display=e.hasAttribute("data-preview-old-display")?e.getAttribute("data-preview-old-display"):""})}function n(t){var o=t.containerId,i=t.files,n=t.fileViewAction,r=t.fileViewOrigin,l=t.fileViewTarget,a=t.indexOfPreviewFile,s=t.onFileViewerDidMount,c=t.onFileViewerUnmount,d=(t.shouldFocusComment,t.shouldPresentInZoom),u=void 0!==d&&d,p=t.updateBrowserLocation,f=void 0===p||p,m=t.user;new Promise(function(t,o){e(["modules/clean/react/file_viewer/controller"],t,o)}).then(__importStar).then(function(e){e.open(i,a,m,o,{fileViewTarget:l,fileViewOrigin:r,fileViewAction:n,disableRouting:!f,onComponentDidMount:s,onComponentWillUnmount:c,shouldPresentInZoom:u})})}Object.defineProperty(t,"__esModule",{value:!0});var r=[".maestro-chrome","#maestro-nav","#page-footer","#page-content","#page-header","#page-sidebar","#browse-box","#flash-upload-container","#maestro-header","#maestro-header-portal","#maestro-prompt",".snackbar-container","#onboarding-sidebar-pagelet"].join();t.hideElementsBehindFileViewer=o,t.showElementsBehindFileViewer=i,t.asyncOpenPreview=n}),define("modules/clean/react/files_view/constants",["require","exports","modules/clean/react/files_view/types","modules/core/i18n"],function(e,t,o,i){"use strict";var n,r,l,a;Object.defineProperty(t,"__esModule",{value:!0});var s=i._("Name",{comment:"Column header that indicates filename.",project:"filename"});t.DEFAULT_COLUMN_HEADER_HEIGHT=40,t.DEFAULT_ROW_HEIGHT=72,t.DEFAULT_ROW_HEIGHT_DENSE=60,t.ROW_TITLE_HEIGHT=24,t.ROW_SUBTITLE_HEIGHT=16,t.ROW_VERTICAL_PADDING=16,t.ROW_SNIPPET_VERTICAL_MARGIN=8,t.SNIPPET_HEIGHT_PER_ROW=16,t.SNIPPET_HORIZONTAL_PADDING=16,t.MEDIA_CELL_ICON_WIDTH=64,t.DEFAULT_ROW_HEIGHT_WITH_SNIPPETS=t.ROW_VERTICAL_PADDING+t.ROW_TITLE_HEIGHT+t.ROW_SUBTITLE_HEIGHT+t.ROW_SNIPPET_VERTICAL_MARGIN+3*t.SNIPPET_HEIGHT_PER_ROW,t.COMPACT_COLUMN_HEADER_HEIGHT=48,t.PINNED_TEAM_FOLDER_SECONDARY_HEADER_PADDING_TOP=12,t.CHECKBOX_CELL_FLEX="0 0 36px",t.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH=65,t.LIST_VIEW_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.LIST_VIEW_SEARCH_MODE_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 50%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 60%","0 0 40%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 100%"]},t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS={3:50,2:65,1:100},t.LIST_VIEW_SEARCH_MODE_WITH_SNIPPETS_COLUMN_FLEX={3:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[3]+"%","0 0 25%","0 0 25%"],2:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[2]+"%","0 0 35%"],1:[t.CHECKBOX_CELL_FLEX,"1 1 "+t.FILE_NAME_CELL_WITH_SNIPPETS_FLEX_BASIS[1]+"%"]},t.GRID_VIEW_COLUMN_FLEX=[t.CHECKBOX_CELL_FLEX,"1 1"],t.LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.SHARED_WITH,label:i._("Members"),popoverTriggerLabel:i._("Members"),isSortOrderOptionDisabled:!0},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.GRID_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified")},{sortField:o.SortField.CATEGORY,label:i._("Type"),popoverTriggerLabel:i._("Type")},{sortField:o.SortField.EXTENSION,label:i._("Extension"),popoverTriggerLabel:i._("Extension")},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size")}],t.SEARCH_LIST_VIEW_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Modified"),popoverTriggerLabel:i._("Modified"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size"),isLocked:!0,isSortDisabled:!0}],t.SEARCH_LIST_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.RELEVANCE,label:i._("Relevance"),popoverTriggerLabel:i._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.SIZE,label:i._("Size"),popoverTriggerLabel:i._("Size"),isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Last modified"),popoverTriggerLabel:i._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_GRID_VIEW_SORT_ENABLED_COLUMNS=[{sortField:o.SortField.RELEVANCE,label:i._("Relevance"),popoverTriggerLabel:i._("Relevance"),isLocked:!1,isSortDisabled:!1},{sortField:o.SortField.MODIFIED,label:i._("Last modified"),popoverTriggerLabel:i._("Last modified"),isLocked:!1,isSortDisabled:!1}],t.SEARCH_LIST_VIEW_COLUMNS_DELETED=[{sortField:o.SortField.FILENAME,label:s,popoverTriggerLabel:s,isLocked:!0,isSortDisabled:!0},{sortField:o.SortField.MODIFIED,label:i._("Deleted"),popoverTriggerLabel:i._("Deleted"),isLocked:!0,isSortDisabled:!0}],t.FilesViewTileGridConstants={NUM_THRESHOLD_ROWS:10,SCROLL_DELTA_THRESHOLD:1},t.AllNewFolderCreationStates=[o.NewFolderCreationState.CREATE_FOLDER_INACTIVE,o.NewFolderCreationState.PENDING_INPUT,o.NewFolderCreationState.SAVING_INPUT],t.AllRenameStates=[o.RenameState.PENDING_INPUT,o.RenameState.SAVING_INPUT],t.AllViewTypes=[o.ViewType.Grid,o.ViewType.LargeGrid,o.ViewType.List],t.ViewTypeLabels=(n={},n[o.ViewType.Grid]=i._("Small"),n[o.ViewType.List]=i._("List"),n[o.ViewType.LargeGrid]=i._("Large"),n),t.AllDropTargetHighlightModes=[o.DropTargetHighlightMode.NONE,o.DropTargetHighlightMode.ALL_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS,o.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS],t.AllSortFields=[o.SortField.FILENAME,o.SortField.MODIFIED,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SIZE,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING,o.SortField.FILE_COUNTS],t.SortIsFilename=[o.SortField.FILENAME,o.SortField.CATEGORY,o.SortField.EXTENSION,o.SortField.SHARED_WITH,o.SortField.SYNC_SETTING],t.AllLoadingStates=[o.LoadingState.LOADED,o.LoadingState.LOADING_FIRST_PAGE,o.LoadingState.LOADING_REMAINING_PAGES,o.LoadingState.LOAD_ERROR],t.AllSortDirections=[o.SortDirection.ASCENDING,o.SortDirection.DESCENDING],t.ViewTypeThumbnailSizes=(r={},r[o.ViewType.Grid]=256,r[o.ViewType.LargeGrid]=512,r[o.ViewType.List]=32,r),t.ViewTypeGridSizes=(l={},l[o.ViewType.Grid]=160,l[o.ViewType.LargeGrid]=480,l[o.ViewType.List]=0,l),t.CulledListConstants={ITEM_ROW_HEIGHT_PX:46,MAESTRO_ITEM_ROW_HEIGHT_PX:57,SEARCH_ROW_HEIGHT_PX:53,MAESTRO_SEARCH_ROW_HEIGHT_PX:66,DEFAULT_HEADER_HEIGHT_PX:142,ITEM_BUFFER_SIZE:5},t.OverflowMenuConstants={MENU_ITEM_HEIGHT_PX:32,MENU_MARGIN_PX:8,MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX:17},t.VIEW_TYPE_COOKIE_NAME="browse_view_type",t.COLUMNS_STORAGE_KEY="browse_columns",t.VIEW_TYPE_STORAGE_KEY="files_view_types",t.VIEW_TYPE_GLOBAL_SCOPE="*",t.VIEW_TYPE_SCOPE_IMAGE_SEARCH=":search/image",t.IMAGE_THUMBNAIL_EXTENSIONS=["jpg","jpeg","png","tiff","tif","gif","bmp","webp","wbmp","psd","svg","svgz","ai","eps","otf","ttf","3gp","3gpp","3gpp2","asf","avi","dv","flv","m2t","m4v","mkv","mov","mp4","mpeg","mpg","mts","mxf","oggtheora","ogv","rm","ts","vob","webm","wmv","indd"],t.defaultViewTypes=(a={},a[t.VIEW_TYPE_GLOBAL_SCOPE]=o.ViewType.List,a[t.VIEW_TYPE_SCOPE_IMAGE_SEARCH]=o.ViewType.LargeGrid,a)}),define("modules/clean/react/files_view/drag_and_drop",["require","exports","modules/clean/react/browse/models","modules/clean/react/no-jquery"],function(e,t,o,i){"use strict";function n(e,t,o,n,r,l,s){a.add(e,"dragenter",function(e){(t()||o())&&!i.closestElement(e.target,r)&&l()&&(s(null),n())})}function r(e){a.remove(e,"dragenter")}function l(e,t,i,n,r,l,a,s){if(t||i){if(e.is_dir&&!(n&&i)){if(r)return;var c=l.isCurrentPathWriteable()&&!o.File.isReadOnlySharedFolder(e);a(e),s({path:e.fq_path,hasPermissionToUploadToFolder:c})}else a(null),s()}}Object.defineProperty(t,"__esModule",{value:!0});var a=new i.ScopedEventHandlers(document);t.setupExternalDragHandler=n,t.cleanupExternalDragHandler=r,t.onFileDragEnterItem=l}),define("modules/clean/react/files_view/file_jump",["require","exports","tslib","modules/clean/keycode","modules/clean/react/no-jquery","modules/core/dom"],function(e,t,o,i,n,r){"use strict";function l(e,t,o,l){var c=null!=e.which?e.which:e.keyCode,d=String.fromCharCode(c);c<i.KeyCode.SPACE||a.includes(d)||!n.closestElement(document.activeElement,".brws-checkbox-cell")&&r.focus_in_input()||e.metaKey||e.altKey||e.altGraphKey||e.ctrlKey||c===i.KeyCode.SPACE&&!t()||(c===i.KeyCode.SPACE&&t()&&e.preventDefault(),o(d),null!=s&&clearTimeout(s),s=setTimeout(function(){l()},1e3))}Object.defineProperty(t,"__esModule",{value:!0}),r=o.__importStar(r);var a=["/","\\",":","?","*","<",">","|"],s=null;t.handleKeyPress=l}),define("modules/clean/react/files_view/file_list_empty_folder_table",["require","exports","tslib","external/immutable","external/lodash","react","spectrum/media_table","spectrum/table","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/types"],function(e,t,o,i,n,r,l,a,s,c){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),n=o.__importStar(n),r=o.__importDefault(r);var d=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.props.onTTI&&this.props.onTTI(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},t.prototype.setupKeyboardShortcuts=function(){var e=this;s.setupFilesViewKeyboardShortcuts({viewType:c.ViewType.List,getIsGlobalEvent:s.generateGetIsGlobalEvent(this),getIsItemEvent:function(){return!1},getSelectedFiles:function(){return i.OrderedMap()},isCurrentPathWriteable:function(){return!1},selectAllAction:n.noop,deselectAllAction:n.noop,onCopyToClipboard:n.noop,onDelete:n.noop,onFocusSearchBar:this.props.onFocusSearchBar,onNavigateToFileOrFolder:n.noop,onNavigateToParentFolder:this.props.onNavigateToParentFolder,onPasteFromClipboard:this.props.onPasteFromClipboard,onShowRename:n.noop,scope:"EmptyFolderTable",onShowHelpMenu:function(){return e.props.onOpenKeyboardShortcutModal()}})},t.prototype.cleanupKeyboardShortcuts=function(){s.resetFilesViewKeyboardShortcuts("EmptyFolderTable")},t.prototype._renderTitle=function(){return r.default.createElement("h3",{className:"u-font-strong empty-folder-table-title"},this.props.title)},t.prototype._renderSubtitle=function(){var e=this.props,t=e.subtitle,o=e.subtitleLink,i=e.subtitleOnClick;return t&&o?r.default.createElement("a",{className:"empty-folder-table-subtitle empty-folder-table-link",href:o,onClick:i},t):t?r.default.createElement("span",{className:"empty-folder-table-subtitle"},t):void 0},t.prototype.render=function(){for(var e=[],t=0;t<this.props.numRowsAbove;t++)e.push(r.default.createElement(l.MediaRow,{key:-t-1}));for(var o=[],i=Math.max(this.props.totalRows-this.props.numRowsAbove-1,0),t=0;t<i;t++)o.push(r.default.createElement(l.MediaRow,{key:t+1}));return r.default.createElement(a.Table,{role:"main","aria-atomic":"true","aria-live":"polite",className:"empty-folder-table"},r.default.createElement(a.TableHead,null),r.default.createElement(a.TableBody,null,e,r.default.createElement(l.MediaRow,{key:0},r.default.createElement(l.MediaCell,{className:"empty-folder-table-cell",title:this._renderTitle(),subtitle:this._renderSubtitle()})),o))},t.defaultProps={numRowsAbove:2,totalRows:14,onFocusSearchBar:n.noop,onPasteFromClipboard:n.noop,onNavigateToParentFolder:n.noop,onOpenKeyboardShortcutModal:n.noop},t})(r.default.PureComponent);t.EmptyFolderTable=d}),define("modules/clean/react/files_view/file_list_utils",["require","exports","modules/clean/filetypes","modules/clean/react/files_view/types","modules/clean/react/browse/models","modules/clean/sharing/browse_exports"],function(e,t,o,i,n,r){"use strict";function l(e){var t=e.file,r=e.isSelected,l=e.dropTargetHighlightMode;if(l===i.DropTargetHighlightMode.NONE)return!1;if(!t.is_dir)return!1;if(n.File.isReadOnlySharedFolder(t))return!1;if(t.isDeleted)return!1;switch(l){case i.DropTargetHighlightMode.ALL_FOLDERS:return!0;case i.DropTargetHighlightMode.NONSELECTED_FOLDERS:return!r;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_FOLDERS:return!r&&t.type!==o.FileTypes.SHARED_FOLDER;case i.DropTargetHighlightMode.NONSELECTED_NONSHARED_NONTEAM_FOLDERS:return!r&&![o.FileTypes.SHARED_FOLDER,o.FileTypes.TEAM_SHARED_FOLDER].includes(t.type)}return!1}function a(e){var t=e.context,i=e.file;e.user;return i.isDeleted||i.is_dir&&r.shouldUsePublicFolderSharing(t.config,i.fq_path)||n.File.isTeamMemberFolder(i)||!n.File.canViewFileMembers(i,t)||i.type===o.FileTypes.SANDBOX}Object.defineProperty(t,"__esModule",{value:!0}),t.shouldFileBeHighlightedDropTarget=l,t.isSharingDisabledForFile=a}),define("modules/clean/react/files_view/file_thumbnail",["require","exports","tslib","external/classnames","react","modules/clean/filepath","modules/clean/react/files_view/constants","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/icon/lock_badge","modules/clean/user_education/react/user_education_effect"],function(e,t,o,i,n,r,l,a,s,c,d,u){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importDefault(n),r=o.__importStar(r);var p=(function(e){function t(t){var o=e.call(this,t)||this;o._thumbRequestId=null,o.handleThumbnailError=function(){o.setState({thumbnailSrc:null})};var i=t.thumbStore,n=t.file.thumbnail_url_tmpl;return o.state={thumbnailSrc:n?i.get_thumb(n):null},o}return o.__extends(t,e),t.prototype.componentDidMount=function(){this.fetchThumbnail(this.props)},t.prototype.componentWillReceiveProps=function(e){e.file.thumbnail_url_tmpl!==this.props.file.thumbnail_url_tmpl&&(this.unbindThumbnailIfNeeded(),this.fetchThumbnail(e))},t.prototype.componentWillUnmount=function(){this.unbindThumbnailIfNeeded()},t.prototype.fetchThumbnail=function(e){var t=this,o=e.file,i=e.thumbStore,n=s.isFile(o)?r.file_extension(r.filename(o.fq_path)):o.ext&&"."===o.ext[0]?o.ext.slice(1):o.ext;if(l.IMAGE_THUMBNAIL_EXTENSIONS.includes(n)){var d=c.getThumbnailUrlForItem(o.thumbnail_url_tmpl,l.ViewTypeThumbnailSizes[a.ViewType.List]);d&&(this._thumbRequestId=i.bind_url(d,{onSuccess:function(){t.setState({thumbnailSrc:i.get_thumb(d)})},onError:function(){t.handleThumbnailError()}}))}},t.prototype.unbindThumbnailIfNeeded=function(){var e=this.props.thumbStore;this._thumbRequestId&&(e.unbind_url(this._thumbRequestId),this._thumbRequestId=null),this.setState({thumbnailSrc:null})},t.prototype.render=function(){var e=this.props,t=e.file,o=e.showCDMUserEducationEffects,r=this.state.thumbnailSrc,l=s.isFile(t)?t.fq_path:t.filename;return r?n.default.createElement(d.LockBadge,{file:this.props.file,variant:"preview-small"},n.default.createElement("img",{alt:l,draggable:!1,className:i.default("brws-file-name-cell-icon","brws-file-name-cell-thumb"),src:r,onError:this.handleThumbnailError})):n.default.createElement(f,{file:t,showCDMUserEducationEffects:o})},t})(n.default.PureComponent);t.FileThumbnail=p;var f=function(e){var t=e.file,o=e.showCDMUserEducationEffects,i=s.isFile(t)?t:{type:t.type,icon:t.icon,fq_path:"/"+t.filename,thumbnail_url_tmpl:t.thumbnail_url_tmpl},r=n.default.createElement(c.FileOrFolderIcon,{className:"brws-file-name-cell-icon",file:i,showPreview:!1});return o?n.default.createElement(u.UserEducationEffect,{containerName:"FileItemRow",name:"TMFIcon",useSpan:!0},r):r}}),define("modules/clean/react/files_view/keyboard_focus",["require","exports","tslib","react"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i);var n=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.lastMouseDown=0,t.onFocus=function(e){Date.now()-t.lastMouseDown>500&&t.props.onKeyboardFocus(e)},t.onMouseDown=function(){t.lastMouseDown=Date.now()},t}return o.__extends(t,e),t.prototype.render=function(){return this.props.children({onFocus:this.onFocus,onMouseDown:this.onMouseDown})},t})(i.default.PureComponent);t.WithKeyboardFocus=n}),define("modules/clean/react/files_view/keyboard_shortcuts",["require","exports","tslib","external/keymaster","external/react-dom","modules/clean/react/browse/action_logger","modules/clean/react/files_view/file_jump","modules/clean/react/files_view/types","modules/clean/react/no-jquery","modules/clean/undo","modules/core/browser_detection","modules/core/i18n","modules/core/notify"],function(e,t,o,i,n,r,l,a,s,c,d,u,p){"use strict";function f(e){i.default.clearScope(e),i.default.setScope(y)}function m(e,t){return function(o){e(o)&&(o.preventDefault(),"function"==typeof t&&t(o))}}function h(e){return function(t){return!document.activeElement||document.activeElement===document.body||t.target instanceof Element&&n.findDOMNode(e).contains(t.target)}}function _(e){f(e),b.remove(e,"keydown"),b.remove(e,"keyup")}function g(e){var t=e.user,o=e.viewType,i=e.getSelectedFiles,n=e.isCurrentPathWriteable,l=e.onShowHelpMenu,a=e.onDelete,s=e.onShowRename,d=e.onFocusSearchBar,f=e.onNavigateToFileOrFolder,m=e.onNavigateToParentFolder,h=e.selectAllAction,_=e.onCopyToClipboard,g=e.onPasteFromClipboard,E=e.deselectAllAction,S=function(){var e=i(),t=e.some(function(e){return e.read_only});if(1===e.size)if(n()&&!t){var o=e.first();o.isDeleted?p.Notify.error(u._("Deleted files can’t be renamed.")):s(o)}else p.Notify.warning(u._("You don’t have permission to rename files in this folder."))},v=function(){var e=i();e.size&&a(e.toArray())},y=function(){c.performUndo()},b=function(){var e=i();1===e.size&&f(e.first())},T=function(){var e=i(),t=e.first();1===e.size&&t.is_dir&&f(t)},I=function(e,i){r.logKeyboardShortcutUsage({user_id:t?t.id:null,view_type:o,keyboard_shortcut_type:e}),i()};return{renameFile:function(){I("rename",S)},focusSearchBar:function(){I("search",d)},showHelpMenu:function(){I("help",l)},selectAll:function(){I("select-all",h)},copyToClipboard:function(){I("copy",_)},deleteFiles:function(){I("delete",v)},pasteFromClipboard:function(){I("paste",g)},undoAction:function(){I("undo",y)},deselectFiles:function(){I("deselect",E)},navigateToFileOrFolder:function(){I("navigate-file-folder",b)},navigateToFolder:function(){I("navigate-folder",T)},navigateToParent:function(){I("navigate-parent",m)}}}function E(e){var t=e.scope,o=e.getIsItemEvent,n=e.getIsGlobalEvent;y=i.default.getScope(),y!==t&&i.default.setScope(t);var r=g(e);i.default("f2",t,m(o,r.renameFile)),i.default("/",t,m(n,r.focusSearchBar)),i.default("shift+/",t,m(n,r.showHelpMenu)),i.default("escape",t,m(n,r.deselectFiles)),d.mac?(i.default("command+a",t,m(n,r.selectAll)),i.default("command+c",t,m(o,r.copyToClipboard)),i.default("backspace",t,m(o,r.deleteFiles)),i.default("command+v",t,m(n,r.pasteFromClipboard)),i.default("command+z",t,m(n,r.undoAction))):(i.default("ctrl+a",t,m(n,r.selectAll)),i.default("ctrl+c",t,m(o,r.copyToClipboard)),i.default("delete",t,m(o,r.deleteFiles)),i.default("ctrl+v",t,m(n,r.pasteFromClipboard)),i.default("ctrl+z",t,m(n,r.undoAction))),e.viewType===a.ViewType.List&&(i.default("right",t,m(o,r.navigateToFolder)),i.default("left",t,m(n,r.navigateToParent)))}function S(e){var t=e.scope,o=e.getIsFileJumping,n=e.onAddFileJumpKeyCode,r=e.onResetFileJump,a=function(e){i.default.getScope()===t&&l.handleKeyPress(e,o,n,r)};b.add(t,"keypress",a)}function v(e){b.remove(e,"keypress")}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importStar(n),l=o.__importStar(l),c=o.__importStar(c),d=o.__importStar(d),t.FILES_VIEW_SHORTCUTS=[{key:u._("/",{comment:"Keyboard symbol for the forward slash"}),desc:u._("Search")},{windowsKey:u._("Ctrl + a",{comment:"Windows keyboard name for the control key plus a key (capitalized Ctrl)"}),macKey:u._("⌘ + a",{comment:"Mac keyboard name for the command key plus a key (⌘ symbol)"}),desc:u._("Select all files")},{windowsKey:u._("Esc",{comment:"Windows keyboard name for the esc key (capitalized)"}),macKey:u._("esc",{comment:"Mac keyboard name for the esc key (all lowercase)"}),desc:u._("Deselect all files")},{windowsKey:u._("Ctrl + c",{comment:"Windows keyboard name for the control key plus c key (capitalized Ctrl)"}),macKey:u._("⌘ + c",{comment:"Mac keyboard name for the command key plus c key (⌘ symbol)"}),desc:u._("Copy selected file(s)")},{windowsKey:u._("Ctrl + v",{comment:"Windows keyboard name for the control key plus v key (capitalized Ctrl)"}),macKey:u._("⌘ + v",{comment:"Mac keyboard name for the command key plus v key (⌘ symbol)"}),desc:u._("Paste selected file(s) into the current folder")},{key:u._("F2",{comment:"Keyboard name for the F2 key"}),desc:u._("Rename selected file")},{windowsKey:u._("Delete",{comment:"Windows keyboard name for the delete key (capitalized)"}),macKey:u._("delete",{comment:"Mac keyboard name for the delete key (all lowercase)"}),desc:u._("Delete selected file(s)")},{windowsKey:u._("Ctrl + z",{comment:"Windows keyboard name for the control key plus z key (capitalized Ctrl)"}),macKey:u._("⌘ + z",{comment:"Mac keyboard name for the command key plus z key (⌘ symbol)"}),desc:u._("Undo recent move/copy/rename/delete")},{key:u._("?",{comment:"Keyboard symbol for the question mark"}),desc:u._("Show keyboard shortcuts")}],t.FILES_VIEW_LIST_SHORTCUTS=[{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Go up a folder")},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Open folder")}].concat(t.FILES_VIEW_SHORTCUTS),t.FILES_VIEW_TILE_GRID_SHORTCUTS=[{key:u._("↑",{comment:"Keyboard symbol for the up arrow key"}),desc:u._("Select file in previous row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("↓",{comment:"Keyboard symbol for the down arrow key"}),desc:u._("Select file in next row (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("←",{comment:"Keyboard symbol for the left arrow key"}),desc:u._("Select previous file (hold shift to select range)",{comment:"Shift refers to the shift key"})},{key:u._("→",{comment:"Keyboard symbol for the right arrow key"}),desc:u._("Select next file (hold shift to select range)",{comment:"Shift refers to the shift key"})}].concat(t.FILES_VIEW_SHORTCUTS);var y="",b=new s.ScopedEventHandlers(document);t.generateGetIsGlobalEvent=h,t.resetFilesViewKeyboardShortcuts=_,t.getActionsAndAttachLogging=g,t.setupFilesViewKeyboardShortcuts=E,t.setupFileJumpKeyboardShortcuts=S,t.resetFileJumpKeyboardShortcuts=v}),define("modules/clean/react/files_view/name_input",["require","exports","tslib","external/classnames","react","modules/clean/keycode","modules/clean/react/files_view/types"],function(e,t,o,i,n,r,l){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importDefault(n);var a=function(){},s=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inputRef=n.default.createRef(),t.handleDragStart=function(e){e.stopPropagation()},t.handleSubmit=function(e){e.preventDefault(),t.submitIfChanged(l.NameInputActionSource.SUBMIT)},t.handleKeyDown=function(e){e.keyCode===r.KeyCode.ESC?(e.preventDefault(),t.props.onCancel({source:l.NameInputActionSource.ESC})):e.keyCode===r.KeyCode.ENTER&&t.handleSubmit(e)},t.handleBlur=function(e){t.submitIfChanged(l.NameInputActionSource.BLUR)},t.handleClick=function(e){e.preventDefault(),t.props.onClick(e)},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){var e=this;this.inputRef.current&&this.inputRef.current.focus(),window.requestAnimationFrame(function(){if(e.inputRef.current){var t=e.inputRef.current.value,o=e.props.isDir?t.length:t.lastIndexOf(".");o<0&&(o=t.length),e.inputRef.current.setSelectionRange(0,o)}})},t.prototype.submitIfChanged=function(e){if(this.inputRef.current){var t=this.inputRef.current.value.trim();t===this.props.defaultValue?this.props.onCancel({source:e}):this.props.onSubmit(t)}},t.prototype.render=function(){return n.default.createElement("form",{className:"u-pad-right-xs",onSubmit:this.handleSubmit},n.default.createElement("input",{ref:this.inputRef,defaultValue:this.props.defaultValue,className:i.default("c-input",this.props.className),onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,onDragStart:this.handleDragStart,"aria-label":this.props.label,onClick:this.handleClick}))},t.defaultProps={className:"",onCancel:a,onClick:a,onSubmit:a,idDir:null},t})(n.default.PureComponent);t.NameInput=s}),define("modules/clean/react/files_view/overflow_menu",["require","exports","tslib","react","spectrum/overflow_button","spectrum/popover","modules/clean/react/async/loadable","modules/clean/react/files_view/constants","modules/clean/react/files_view/overflow_menu_item_section","modules/core/browser_detection","modules/core/i18n"],function(e,t,o,i,n,r,l,a,s,c,d){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.AsyncFilesViewMobileOverflowMenu=l.Loadable({loader:function(){return new Promise(function(t,o){e(["modules/clean/react/files_view/mobile_overflow_menu"],t,o)}).then(o.__importStar).then(function(e){return e.FilesViewMobileOverflowMenu})}});var u;(function(e){e[e.Normal=0]="Normal",e[e.Small=1]="Small"})(u=t.OverflowMenuSize||(t.OverflowMenuSize={}));var p=(function(e){function n(t){var o=e.call(this,t)||this;return o.onClick=function(e){e.preventDefault(),e.stopPropagation()},o.handleSelection=function(e){e.performAction()},o.setOverflowMenuRef=function(e){o.overflowMenuContent=e},o.handleMenuToggle=function(e){var t=e.isOpen,i=e.isPopover,r=void 0===i||i;if(t&&o.props.onMenuOpen&&o.props.onMenuOpen(),n.isDynamicProps(o.props)&&t){var l=o.props.getOverflowMenuActions(o.props.file,!!o.props.canDisplayFolderSizes);o.setState({actionSection:l}),r&&o.setState({popoverContentPosition:o.calculatePopoverContentPosition(l)})}},o.handleMobileMenuOpen=function(e){return function(){o.handleMenuToggle({isOpen:!0,isPopover:!1}),e()}},o.state={popoverContentPosition:"below",actionSection:n.isDynamicProps(t)?[]:t.actionSection},o}return o.__extends(n,e),n.prototype.componentDidMount=function(){n.isDynamicProps(this.props)||this.setState({popoverContentPosition:this.calculatePopoverContentPosition(this.props.actionSection)})},n.prototype.calculatePopoverContentPosition=function(e){if(e.length<=0||!this.overflowMenuContent)return this.state.popoverContentPosition;var t=this.overflowMenuContent.getElementsByClassName("browse-overflow-menu-trigger-button")[0],o=a.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[0].length+2*a.OverflowMenuConstants.MENU_MARGIN_PX;e.length>1&&(o+=a.OverflowMenuConstants.MENU_ITEM_HEIGHT_PX*e[1].length+a.OverflowMenuConstants.MENU_POPOVER_ITEM_GROUP_SEPARATOR_HEIGHT_PX);var i=t.getBoundingClientRect(),n=this.props.viewportTopOffset||a.CulledListConstants.DEFAULT_HEADER_HEIGHT_PX;return i.top>o+n&&i.bottom+o>window.innerHeight?"above":"below"},n.prototype.render=function(){var e=this,l=this.props,a=l.attachment,d=l.isResponsive,u=l.size,p=l.showBorders,f=l.ariaHidden,m=n.isDynamicProps(this.props)?this.props:{},h=m.file,_=void 0===h?void 0:h,g=m.thumbStore,E=void 0===g?void 0:g,S=d&&c.is_mobile_or_tablet();return i.default.createElement("div",{className:"browse-overflow-menu",onClick:this.onClick,onDoubleClick:this.onClick,ref:this.setOverflowMenuRef,"aria-hidden":f?"true":void 0},S?i.default.createElement(t.AsyncFilesViewMobileOverflowMenu,{trigger:function(o){var n=o.openMobileMenu
;return i.default.createElement(t.FilesViewOverflowMenuButton,{onClick:e.handleMobileMenuOpen(n),showBorders:p,size:u})},file:_,actionSection:this.state.actionSection,thumbStore:E}):i.default.createElement(r.Popover,{closeOnSelection:!0,onMenuToggle:this.handleMenuToggle,onSelection:this.handleSelection},i.default.createElement(r.PopoverTrigger,o.__assign({className:"browse-overflow-menu-trigger"},o.__assign({},f&&{tabIndex:-1})),i.default.createElement(t.FilesViewOverflowMenuButton,{size:u,showBorders:p})),i.default.createElement(r.PopoverContent,{attachment:a,className:"browse-overflow-menu-content",position:this.state.popoverContentPosition},i.default.createElement(s.OverflowMenuItemSection,{actionSection:this.state.actionSection,renderItem:function(e){return i.default.createElement(r.PopoverContentItem,{className:e.className,disabled:e.disabled,value:e},e.label)}}))))},n.isDynamicProps=function(e){return"file"in e},n.defaultProps={attachment:"right",onMenuToggle:function(){},isResponsive:!0},n})(i.default.PureComponent);t.FilesViewOverflowMenu=p,t.FilesViewOverflowMenuButton=function(e){var t=e.size,o=e.showBorders,r=e.onClick;return i.default.createElement(n.OverflowButton,{"aria-label":d._("More actions"),className:"browse-overflow-menu-trigger-button",onClick:r,size:t===u.Small?"small":"default",tagName:"span",variant:o?"secondary":"borderless"})}}),define("modules/clean/react/files_view/overflow_menu_item_section",["require","exports","tslib","react","spectrum/popover"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.OverflowMenuItemSection=function(e){var t=e.actionSection,o=e.showSeparators,r=void 0===o||o,l=e.renderItem;return 0===t.length?null:i.default.createElement(i.default.Fragment,null,t.map(function(e){return e.map(function(e,t){return i.default.createElement(i.default.Fragment,{key:t+"-"+e.label},l(e))})}).reduce(function(e,t,o){return e.concat(r?[i.default.createElement(n.PopoverItemGroupSeparator,{key:o})]:[],t)}))}}),define("modules/clean/react/files_view/star",["require","exports","tslib","react","modules/clean/react/async/loadable"],function(e,t,o,i,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),t.StarContainer=n.Loadable({loader:function(){return o.__awaiter(this,void 0,Promise,function(){var t,n,r,l;return o.__generator(this,function(a){switch(a.label){case 0:return[4,new Promise(function(t,o){e(["modules/clean/react/starred/browse_exports"],t,o)}).then(o.__importStar)];case 1:return t=a.sent(),n=t.idTypePairFromStarrableItem,r=t.Star,l=t.StarredSource,[2,function(e){var t=e.item,o=e.user,a=e.className,s=e.onStarClick,c=e.isReadOnly,d=e.tabIndex,u=n(t),p=u.id,f=u.type;return i.default.createElement("div",{className:a},i.default.createElement(r,{id:p,key:"star",idType:f,isDir:Boolean(t.is_dir),user:o,onStarClick:s,source:l.BROWSE,isReadOnly:c,tabIndex:d}))}]}})})}})}),define("modules/clean/react/files_view/tile_grid",["require","exports","tslib","external/classnames","external/immutable","react","spectrum/button","modules/clean/em_string","modules/clean/filepath","modules/clean/filetypes","modules/clean/react/browse/action_logger","modules/clean/react/browse/models","modules/clean/react/files_view/constants","modules/clean/react/files_view/drag_and_drop","modules/clean/react/files_view/file_list_utils","modules/clean/react/files_view/keyboard_shortcuts","modules/clean/react/files_view/overflow_menu","modules/clean/react/files_view/star","modules/clean/react/files_view/tile_label_input","modules/clean/react/files_view/types","modules/clean/react/files_view/util","modules/clean/react/icon/file_folder_icon","modules/clean/react/maestro/tile_grid","modules/clean/react/selectable_list","modules/clean/react/title_bubble","modules/clean/web_user_action_events","modules/core/browser","modules/core/i18n"],function(e,t,o,i,n,r,l,a,s,c,d,u,p,f,m,h,_,g,E,S,v,y,b,T,I,w,L,F){"use strict";function C(e){var t=e instanceof u.File?s.filename(e.fq_path):v.isFswm(e)?e.filename:e instanceof u.Paper?e.title:e.name;if(e instanceof u.File)switch(e.type){case c.FileTypes.FOLDER:t=F._("Folder, %(alt)s").format({alt:t});break;case c.FileTypes.PACKAGE:t=F._("Package, %(alt)s").format({alt:t});break;case c.FileTypes.SHARED_FOLDER:t=F._("Shared folder, %(alt)s").format({alt:t});break;case c.FileTypes.SANDBOX:t=F._("Sandbox, %(alt)s").format({alt:t});break;case c.FileTypes.TEAM_SHARED_FOLDER:t=F._("Team shared folder, %(alt)s").format({alt:t});break;case c.FileTypes.TEAM_MEMBER_FOLDER:t=F._("Team member folder, %(alt)s").format({alt:t});break;default:t=F._("File, %(alt)s").format({alt:t})}return t}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importStar(n),r=o.__importDefault(r),s=o.__importStar(s),L=o.__importStar(L);var R=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.onStarClickCallback=function(e){var o=t.props,i=o.onStarClick,n=o.item,r=n;i&&i(r,e)},t}return o.__extends(t,e),t.prototype.render=function(){var e,t=this.props,o=t.fileRename,i=t.arePostTTIModulesLoaded,n=t.user,l=t.item,c=t.createRenameCancelHandler,d=t.createRenameSubmitHandler;if(e=l instanceof u.File?s.filename(l.fq_path):l instanceof u.FileSharedWithMe?l.filename:l instanceof u.Paper?l.title:l.name,l instanceof u.File&&o&&s.paths_are_equal(o.file.fq_path,l.fq_path)){if(o.state===S.RenameState.PENDING_INPUT)return r.default.createElement(E.TileLabelInput,{defaultValue:e,label:e,onCancel:c(l),onSubmit:d(l)});if(o.state===S.RenameState.SAVING_INPUT)return r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:F._("Renaming…")})}var f=a.Emstring.em_snippet(e,14,.5),m=i&&l instanceof u.File&&!u.File.isNoAccessSharedFolder(l),h=r.default.createElement(b.TileItemLabelText,{key:"label",label:f});if(e!==f){var _=e.length<=p.FILE_NAME_TOOLTIP_MAX_LINE_LENGTH?e:r.default.createElement("div",{className:"tile-label-tooltip"},e);h=r.default.createElement(I.TitleBubble,{content:_,position:I.TitleBubble.POSITIONS.BOTTOM,className:"tile-label__title-bubble",key:"tooltip"},h)}var v=l instanceof u.File?this.onStarClickCallback:void 0,y=r.default.createElement(g.StarContainer,{item:l,user:n,className:"tile-star",key:"tileStar",onStarClick:v,tabIndex:-1});return r.default.createElement("span",null,[h,m&&!o&&y])},t})(r.default.PureComponent);t.TileLabel=R;var O=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tileGridRef=r.default.createRef(),t.state={inSelectMode:!1,selectedIds:n.Set()},t.handleFileViewerUnmount=function(){t.tileGridRef.current&&t.tileGridRef.current.getAndUpdateTileLayout();var e=t.props.selectedFiles.first();e&&t.props.onFocusFile(e.fq_path)},t.createRenameCancelHandler=function(e){return function(){t.props.onRenameCancel(e)}},t.createRenameSubmitHandler=function(e){return function(o){t.props.onRenameSubmit(e,o)}},t.logOverflowMenuOpen=function(){var e=t.props,o=e.selectedFiles,i=e.user,n=e.viewType,r=o?o.count(function(e){return e.is_dir}):0,l=o?o.count()-r:0;d.logContextMenuClick({uid:i.id,viewType:n,action_surface:w.ActionSurfaceLogValue.CENTER_PANE,numFilesSelected:l,numFoldersSelected:r})},t.hrefForItem=function(e,o){return o instanceof u.File?t.props.hrefForFile(e,o):o instanceof u.FileSharedWithMe?o.href:o.url},t.getTileItem=function(e,o){var i=t.props,n=i.activeDropTarget,a=i.isCreateFolderUIActive,s=i.isPhotosPage,c=i.items,d=i.selection,f=i.user,m=i.viewType,h=i.focusedFileIndex,_=i.disabledMultiselect,g=t.state.inSelectMode;if(a){if(0===e)return t.getCreateFolderTile();e-=1}var E=c.get(e);if(!E){var b="Placeholder "+e;return{altText:b,id:b,isViewOnly:!0,isDraggable:!1,isSelectable:!1}}var T;T=v.isFile(E)||v.isFswm(E);var I,w=E,L=g&&T,R=h===e,O=L&&d.selected.some(function(e){return w instanceof u.FileSharedWithMe?w.file_id===e:w.fq_path===e}),D=t.createToggleSelectHandler(w,O),N=t.createClickHandler({item:E,inSelectModeAndIsFile:L,toggleSelectHandler:D}),M=t.props.selectionMethod===S.SelectionMethod.CLICK?t.createViewFileHandler(E,S.FilesViewActionSource.ROW_DOUBLE_CLICK):void 0,P=t.createViewFileHandler(E,S.FilesViewActionSource.ROW_TITLE);I=(v.isFile(E)||v.isFswm(E))&&g?r.default.createElement(l.Button,{className:"tile__action-button--view-file",variant:"secondary",size:"small","aria-label":F._("View File"),onClick:t.createViewFileHandler(E,S.FilesViewActionSource.ROW_PREVIEW_ICON),tabIndex:R||s?0:-1}):!v.isFile(E)&&!v.isFswm(E)||g?void 0:t.renderTileOverflowMenu(E,o,s);var A=t.renderLabelElement(e),x=C(E),k=E===n,H=t.hrefForItem(f,E),V=E instanceof u.File||E instanceof u.FileSharedWithMe?y.getThumbnailUrlForItem(E.thumbnail_url_tmpl,p.ViewTypeThumbnailSizes[m]):void 0;return{file:w,paper:E instanceof u.Paper?E:void 0,fileSharedWithMe:E instanceof u.FileSharedWithMe?E:void 0,id:u.itemId(E),labelNode:A,altText:x,thumbnailUrl:V,actionNode:I,onClick:N,onDoubleClick:M,onLabelClick:P,isDraggable:!s,isViewOnly:_,isFocused:R,isSelectable:T,handleToggleSelect:D,checkboxAriaText:F._("Select tile"),href:H,onDragEnter:s?void 0:t.createDragEnterHandler(w,O,k),onDragStart:s?void 0:t.createDragStartHandler(w,O,D),isCheckboxFocusable:s}},t.shouldFileBeHighlightedDropTarget=function(e,o){var i=t.props.dropTargetHighlightMode;return m.shouldFileBeHighlightedDropTarget({file:e,isSelected:o,dropTargetHighlightMode:i})},t.scrollIntoView=function(e,o){var i=e.top,n=e.bottom,r=t.props.viewportTopOffset,l=void 0===r?0:r,a=t.getScrollPane(),s=a.height,c=a.scrollTop,d=a.scrollTo,u=s-l,p=c+u;i<c?d(0,i):n>p&&(o&&n-i<u/2?d(0,n-u/2):d(0,n-u))},t}return o.__extends(t,e),t.prototype.componentWillMount=function(){this.setState({inSelectMode:this.props.selectedFiles.count()>0}),this.setSelectedTiles(this.props)},t.prototype.componentDidMount=function(){this.setupExternalDragHandler(),this.setupKeyboardShortcuts()},t.prototype.componentWillUnmount=function(){this.props.isPhotosPage||h.resetFileJumpKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),h.resetFilesViewKeyboardShortcuts(T.SELECTABLE_TILE_GRID_KEY_SCOPE),f.cleanupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE)},t.prototype.componentWillReceiveProps=function(e){e.selectedFiles!==this.props.selectedFiles&&(this.setSelectedTiles(e),this.setState({inSelectMode:e.selectedFiles.count()>0}))},t.prototype.componentDidUpdate=function(e){(e.createNewFolderState===S.NewFolderCreationState.PENDING_INPUT&&this.props.createNewFolderState===S.NewFolderCreationState.SAVING_INPUT||e.fileRename!==this.props.fileRename||e.items!==this.props.items||e.starredState!==this.props.starredState)&&this.tileGridRef.current&&this.tileGridRef.current.forceUpdate()},t.prototype.getTotalNumItems=function(){var e=this.props,t=e.items,o=e.totalNumItems,i=e.isCreateFolderUIActive,n=Math.max(t.size,o);return i&&(n+=1),n},t.prototype.createToggleSelectHandler=function(e,t){var o=this,i=e instanceof u.FileSharedWithMe?e.file_id:e.fq_path;return function(e,n){void 0===n&&(n=!0),n&&e.preventDefault(),e.stopPropagation();var r=o.props,l=r.onDeselectFile,a=r.onSelectFile,s="keyCode"in e,c=Boolean(!s&&e.shiftKey);t?l(i,c):a(i,c?T.SelectOptions.EXTEND:T.SelectOptions.DEFAULT)}},t.prototype.renderTileOverflowMenu=function(e,t,o){var i=this.props,n=i.getOverflowMenuActions,l=i.thumbStore,a=i.arePostTTIModulesLoaded,s=0===t?"left":"right";return a&&r.default.createElement(_.FilesViewOverflowMenu,{file:e,thumbStore:l,getOverflowMenuActions:n,attachment:s,size:_.OverflowMenuSize.Small,showBorders:!0,ariaHidden:!o,onMenuOpen:this.logOverflowMenuOpen})},t.prototype.renderLabelElement=function(e){var t=this.props,o=t.items,i=t.focusedFileIndex,n=t.user,l=t.fileRename,a=t.arePostTTIModulesLoaded,s=t.onStarClick;if(!t.isPhotosPage){var c=o.get(e);if(c){var d=this.state.inSelectMode,u=i===e;return r.default.createElement(R,{item:c,user:n,fileRename:l,arePostTTIModulesLoaded:a,onStarClick:s,inSelectMode:d,isTileFocused:u,createRenameCancelHandler:this.createRenameCancelHandler,createRenameSubmitHandler:this.createRenameSubmitHandler})}}},t.prototype.createViewFileHandler=function(e,t){var o=this;return function(i){if(i.preventDefault(),i.stopPropagation(),"click"===i.type){var n=i;if(0===n.button){var r=o.hrefForItem(o.props.user,e);if(v.hasModifierKey(n))return void L.open_tab(r)}}e instanceof u.File?o.props.onNavigateToFileOrFolder(e,{onFileViewerUnmount:o.handleFileViewerUnmount,actionSource:t}):e instanceof u.FileSharedWithMe?o.props.onOpenFileSharedWithMe(e):e instanceof u.Paper&&o.props.onOpenPaper(e)}},t.prototype.createClickHandler=function(e){var t,o=this,i=e.item,n=e.inSelectModeAndIsFile,r=e.toggleSelectHandler,l=this.createViewFileHandler(i,S.FilesViewActionSource.ROW_SINGLE_CLICK);return t=i instanceof u.File||i instanceof u.FileSharedWithMe,function(e){if(o.props.selectionMethod===S.SelectionMethod.CLICK){if(t){var a="keyCode"in e;if(a)r(e);else{e.preventDefault();var s=i instanceof u.FileSharedWithMe?i.file_id:i.fq_path;o.props.onSelectFile&&(e.shiftKey?o.props.onSelectFile(s,T.SelectOptions.EXTEND):e.ctrlKey||e.metaKey?r(e):o.props.onSelectFile(s,T.SelectOptions.ONLY))}}}else n?r(e):l(e)}},t.prototype.setSelectedTiles=function(e){var t=function(e){return e instanceof u.FileSharedWithMe?e.file_id:e.fq_path},o=n.Set().withMutations(function(o){e.selectedFiles.forEach(function(e){o.add(t(e))})});this.setState({selectedIds:o})},t.prototype.setupExternalDragHandler=function(){var e=this,t=function(){return!!e.props.isDraggingInternalFiles},o=function(){return!!e.props.isDraggingExternalFiles},i=function(){return e.props.activeDropTarget};f.setupExternalDragHandler(T.SELECTABLE_TILE_GRID_KEY_SCOPE,t,o,this.props.onSetFileUploaderPath,".tile",i,this.props.onSetDropTarget)},t.prototype.setupKeyboardShortcuts=function(){var e=this,t=this.props,o=t.user,i=t.viewType,n=t.onDelete,r=t.onShowRename,l=t.deselectAll,a=t.getIsCurrentPathWriteable,s=t.getIsFileJumping,c=t.onAddFileJumpKeyCode,d=t.onResetFileJump,u=t.onCopyToClipboard,p=t.onFocusSearchBar,f=t.onPasteFromClipboard,m=t.selectAll,_=h.generateGetIsGlobalEvent(this),g=_,E=function(){return e.props.selectedFiles};this.props.isPhotosPage||h.setupFileJumpKeyboardShortcuts({scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,getIsFileJumping:s,onAddFileJumpKeyCode:c,onResetFileJump:d}),h.setupFilesViewKeyboardShortcuts({user:o,viewType:i,getIsGlobalEvent:_,getIsItemEvent:g,getSelectedFiles:E,isCurrentPathWriteable:a,selectAllAction:m,deselectAllAction:l,onCopyToClipboard:u,onDelete:n,onFocusSearchBar:p,onPasteFromClipboard:f,onShowRename:r,onNavigateToFileOrFolder:function(){},onNavigateToParentFolder:function(){},scope:T.SELECTABLE_TILE_GRID_KEY_SCOPE,onShowHelpMenu:this.props.onOpenKeyboardShortcutModal})},t.prototype.createDragEnterHandler=function(e,t,o){var i=this;return function(n){i.props.onDragEnter(n,e,t,o)}},t.prototype.createDragStartHandler=function(e,t,o){var i=this;return function(n){t?i.props.onDragStart(n):(o(n,!1),i.props.onDragStart(n,[e]))}},t.prototype.getCreateFolderTile=function(){var e=this.props,t=e.createNewFolderState,o=e.onNewFolderCancel,i=e.onNewFolderSubmit,n=F._("New folder"),l=r.default.createElement("div",null);return t===S.NewFolderCreationState.PENDING_INPUT?(n=F._("Folder name"),l=r.default.createElement(E.TileLabelInput,{label:n,onCancel:o,onSubmit:i})):t===S.NewFolderCreationState.SAVING_INPUT&&(n=F._("Creating new folder…"),l=r.default.createElement(b.TileItemLabelText,{className:"tile-label__text--saving",label:n})),{altText:n,id:"New folder tile",isDraggable:!1,isSelectable:!1,labelNode:l}},t.prototype.getScrollPane=function(){var e=this.props.scrollContainer;if(e&&e.current){var t=e.current,o=t.clientHeight,i=t.scrollTop,n=t.scrollTo;return{height:o,scrollTop:i,scrollTo:n?n.bind(e.current):function(){}}}return{height:window.innerHeight,scrollTop:"scrollingElement"in window.document&&window.document.scrollingElement?window.document.scrollingElement.scrollTop:window.document.documentElement.scrollTop,scrollTo:window.scrollTo?window.scrollTo.bind(window):function(){}}},t.prototype.getWindow=function(){var e=this.props.scrollContainer;return e&&e.current?v.createFakeWindow(e.current):window},t.prototype.render=function(){var e=this.props,t=e.enableMaxHeightGrouping,o=e.sections,n=e.selectionMethod,l=e.viewType,a=e.viewportTopOffset,s=e.scrollContainer,c=e.scrollPositionOffset,d=i.default({"file-tile-grid-container":!0,"file-tile-grid-container--show-checkboxes":this.state.inSelectMode,"file-tile-grid-container--click-to-select":n===S.SelectionMethod.CLICK}),u=new Set;return this.state.selectedIds.forEach(function(e){return u.add(e)}),s&&!s.current?null:r.default.createElement("div",{role:"grid","aria-multiselectable":"true"},r.default.createElement(b.InfiniteTileGrid,{key:"tileGrid",ref:this.tileGridRef,totalNumItems:this.getTotalNumItems(),containerClass:d,rowClass:"file-tile-row",enableMaxHeightGrouping:t,delayRenderFullTile:!this.props.isCreateFolderUIActive,logTileLoading:!0,numThresholdRows:p.FilesViewTileGridConstants.NUM_THRESHOLD_ROWS,scrollDeltaThreshold:p.FilesViewTileGridConstants.SCROLL_DELTA_THRESHOLD,sectionStartIndices:o.sectionStartIndices,sectionLabels:o.sectionLabels,showLabels:!this.props.isPhotosPage,contentOffset:a,getTileItem:this.getTileItem,selectedIds:u,handleTTI:this.props.onTTI,thumbStore:this.props.thumbStore,onRangeInView:this.props.onRangeInView,tilesPerRow:this.props.tilesPerRow,onTilesPerRowChange:this.props.onTilesPerRowChange,activeDropTarget:this.props.activeDropTarget,maxTileWidth:p.ViewTypeGridSizes[l],tileHeight:p.ViewTypeGridSizes[l],shouldFileBeHighlightedDropTarget:this.shouldFileBeHighlightedDropTarget,scrollToIndex:this.props.focusedFileIndex,scrollIntoView:this.scrollIntoView,scrollPositionOffset:c||0,window:this.getWindow()}))},t.defaultProps={enableMaxHeightGrouping:!1,selectionMethod:S.SelectionMethod.CHECKBOX},t})(r.default.PureComponent);t.FilesViewTileGrid=O}),define("modules/clean/react/files_view/tile_label_input",["require","exports","tslib","external/classnames","react","modules/clean/react/files_view/name_input"],function(e,t,o,i,n,r){"use strict";function l(e){var t=i.default("tile-label-input",e.className),o=e.defaultValue||"",l=function(e){e.stopPropagation(),e.preventDefault()};return n.default.createElement(r.NameInput,{className:t,defaultValue:o,label:e.label,onCancel:e.onCancel,onClick:l,onSubmit:e.onSubmit})}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importDefault(n),t.TileLabelInput=l}),define("modules/clean/react/files_view/util",["require","exports","tslib","modules/clean/filepath","modules/clean/react/browse/models","modules/clean/react/files_view/types"],function(e,t,o,i,n,r){"use strict";function l(e){return 0===e.button&&!a(e)}function a(e){return e.altKey||e.ctrlKey||e.metaKey}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),t.shouldHandleClick=l,t.hasModifierKey=a,t.isFile=function(e){return e instanceof n.File},t.isFswm=function(e){return e instanceof n.FileSharedWithMe},t.getFilename=function(e){return t.isFile(e)?i.filename(e.fq_path):e.filename},t.getRedesignProps=function(e){var t={clickToSelect:!1,highDensityBrowse:!1,highDensitySearch:!1};return e?e===r.FilesViewRedesignVariants.ALL?o.__assign({},t,{clickToSelect:!0,highDensityBrowse:!0}):e===r.FilesViewRedesignVariants.CLICK_TO_SELECT?o.__assign({},t,{clickToSelect:!0}):e===r.FilesViewRedesignVariants.HIGH_DENSITY?o.__assign({},t,{clickToSelect:!0,highDensityBrowse:!0,highDensitySearch:!0}):t:t},t.createFakeWindow=function(e){return o.__assign({},window,{document:{documentElement:{get scrollHeight(){return e.scrollHeight},get scrollTop(){return e.scrollTop}},body:{get scrollTop(){return e.scrollTop}}},get innerHeight(){return e.clientHeight},get pageYOffset(){return e.scrollTop},addEventListener:e.addEventListener.bind(e),removeEventListener:e.removeEventListener.bind(e),requestAnimationFrame:requestAnimationFrame.bind(window),cancelAnimationFrame:cancelAnimationFrame.bind(window),scrollTo:e.scrollTo?e.scrollTo.bind(e):function(){}})},t.shouldClickDeselect=function(e){if(e.defaultPrevented)return!1;for(var t=e.target;t instanceof Node&&t!==e.currentTarget;){if(0===t.tabIndex||t instanceof HTMLAnchorElement||t instanceof HTMLButtonElement||t instanceof HTMLInputElement||t instanceof HTMLLabelElement||"button"===t.getAttribute("role")||t.classList.contains("mc-popover"))return!1;t=t.parentElement}return!0}}),define("modules/clean/react/maestro/tile_grid",["require","exports","tslib","react","external/classnames","external/react-dom","spectrum/culled_list","modules/clean/filepath","modules/clean/js_client_stopwatch","modules/clean/react/maestro/tile_element","modules/clean/react/maestro/tile_grid_logger"],function(e,t,o,i,n,r,l,a,s,c,d){"use strict";function u(e){var t=null;return function(){for(var o=[],i=0;i<arguments.length;i++)o[i]=arguments[i];if(!t||t.length!==o.length||!t.every(function(e,t){return e===o[t]}))return t=o,e.apply(void 0,o)}}function p(e){var t=e.className,o=e.label;return t=n.default("tile-label__text",t),i.default.createElement("div",{className:t},o)}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importDefault(n),r=o.__importStar(r),a=o.__importStar(a);t.memoizeCallback=u,t.TileItemLabelText=p;var f=(function(e){function t(t){var o=e.call(this,t)||this;if(o.tileIndexToRowIndex=[],o.rowHeights=[],o.ttiReported=!1,o.itemRangeByRow=[],o.updateScroll=function(e){var t=o.props,i=t.scrollToIndex,n=t.scrollIntoView,r=t.scrollPositionOffset;if(void 0!==i&&n){var l=o.tileIndexToRowIndex[i],a=o.rowHeights.slice(0,l).reduce(function(e,t){return e+t},r);n({top:a,bottom:a+o.rowHeights[l]},e)}},o.updateOnResize=function(){window.requestAnimationFrame(function(){o.getAndUpdateTileLayout()})},o.handleTTI=function(){o.ttiReported=!0;var e=o.props.handleTTI;e&&e()},o.setLastViewedPage=function(e){var t=document.documentElement.scrollTop||document.body.scrollTop,i=Math.round(t/e);if(o.tileLoadLogger.pruneTrackedPages(),o.tileLoadLogger.logCompletedPages(),!o.tileLoadLogger.pagesCompletedLogging.has(i)&&!o.tileLoadLogger.pagesToLog.has(i))if(i!==o.tileLoadLogger.lastViewedPage){if(o.tileLoadLogger.lastViewedPage=i,o.tileLoadLogger.pageChangeTime=o.tileLoadLogger.getTimeNow(),!o.tileLoadLogger.startTimeByPage.get(i)){var n=o.tileLoadLogger.getTimeNow();o.tileLoadLogger.startTimeByPage.set(i,n)}}else{var n=o.tileLoadLogger.getTimeNow();n-o.tileLoadLogger.pageChangeTime>1e3&&o.tileLoadLogger.pagesToLog.add(i)}},o.logTileError=function(e){o.tileLoadLogger&&o.tileLoadLogger.recordTileError(e),o.props.logTileLoading&&d.InfiniteTileGridLogger.logThumbLoadError()},o.logTileLoaded=function(e,t,i){o.tileLoadLogger&&o.tileLoadLogger.recordTileLoaded(e,t,i)},o.renderTileElement=function(e,t,n){if(e<0||e>o.props.totalNumItems)return null;var r=o.props.getTileItem(e,n);if(!r)return i.default.createElement(c.TilePlaceholder,{leftOffset:t,tileHeight:o.state.tileWidth,tileWidth:o.state.tileWidth});var l,s=o.ttiReported&&o.props.delayRenderFullTile,d=r.isSelectable&&!!o.props.selectedIds&&o.props.selectedIds.has(r.id),u=r.file&&o.props.shouldFileBeHighlightedDropTarget(r.file,d),p=u&&r.file===o.props.activeDropTarget;r.fileSharedWithMe?l={type:r.fileSharedWithMe.type,icon:r.fileSharedWithMe.icon,fq_path:"/"+r.fileSharedWithMe.filename,thumbnail_url_tmpl:r.fileSharedWithMe.thumbnail_url_tmpl,name:r.fileSharedWithMe.filename}:r.file&&(l={type:r.file.type,icon:r.file.icon,fq_path:r.file.fq_path,thumbnail_url_tmpl:r.file.thumbnail_url_tmpl,name:a.filename(r.file.fq_path),isDeleted:r.file.isDeleted,is_locked:r.file.is_locked,is_lockholder:r.file.is_lockholder,lockholder_name:r.file.lockholder_name,lock_info:r.file.lock_info});var f=0===e&&o.props.selectedIds&&0===o.props.selectedIds.size;return i.default.createElement(c.TileElement,{file:l,paper:r.paper,key:r.id,onClick:r.onClick,onDoubleClick:r.onDoubleClick,onLabelClick:r.onLabelClick,width:o.state.tileWidth,leftOffset:t,tileIndex:e,labelHeight:r.labelNode?o.props.labelHeight:0,delayRenderFullTile:s,actionNode:r.actionNode,thumbnailUrl:r.thumbnailUrl,labelNode:r.labelNode,altText:r.altText,onThumbnailError:o.props.logTileLoading?o.logTileError:void 0,onThumbnailLoad:o.props.logTileLoading?o.logTileLoaded:void 0,isDraggable:r.isDraggable,onDragEnter:r.onDragEnter,onDragStart:r.onDragStart,isFocused:r.isFocused,isSelectable:r.isSelectable,isSelected:d,isViewOnly:r.isViewOnly,isActiveDropTarget:p,isAvailableDropTarget:u,handleToggleSelect:r.handleToggleSelect,checkboxAriaText:r.checkboxAriaText,checkboxTabIndex:r.isCheckboxFocusable?0:-1,thumbStore:o.props.thumbStore,href:r.href,overrideTabIndex:f})},o.renderRow=function(e,t,n){var r=o.getRowHeight(t);if(!e)return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:r,key:t,tagName:"div",topOffset:n});if(!Array.isArray(e))return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:r,key:t,tagName:"div",topOffset:n},e);for(var a=e,s=a[0],c=a[1],d=o.state.tileWidth+o.props.tilePadding,u=[],p=4,f=s;f<c;f++)u.push(o.renderTileElement(f,p,u.length)),p+=d;return i.default.createElement(l.CulledItem,{className:o.props.rowClass,height:r,key:t,tagName:"div",topOffset:n},u)},o.handleRangeInView=u(function(e,t){var i=o.props.onRangeInView;if(i&&0!==o.props.totalNumItems){var n=o.translateRowRangeToItemRange(e,t),r=n[0],l=n[1];isNaN(r)||isNaN(l)||i(r,l)}}),o.props.sectionLabels||o.props.sectionStartIndices){if(!o.props.sectionLabels||!o.props.sectionStartIndices)throw new Error("Included only one of `sectionLabels` or `sectionStartIndices`.");if(o.props.sectionLabels.length!==o.props.sectionStartIndices.length)throw new Error("sectionLabels and sectionStartIndices must be of same length.")}return o.state={tileWidth:o.props.maxTileWidth},s.JSStopwatch.create_stopwatch_if_not_exist("infinite_tile_grid_logging"),o}return o.__extends(t,e),t.prototype.updateLayout=function(){var e=this;this.animationFrameRequestId=window.requestAnimationFrame(function(){var t=e.getAndUpdateTileLayout();e.props.logTileLoading&&!e.tileLoadLogger&&e.setupTileLogging(e.getRowHeight(),t.tilesPerRow)})},t.prototype.componentDidMount=function(){window.addEventListener("resize",this.updateOnResize),this.updateLayout(),this.updateScroll(!0)},t.prototype.componentWillReceiveProps=function(e){this.tileLoadLogger&&this.tileLoadLogger.updateNumTiles(e.totalNumItems),this.props.maxTileWidth!==e.maxTileWidth&&this.updateLayout()},t.prototype.componentDidUpdate=function(e){e.scrollToIndex!==this.props.scrollToIndex&&this.updateScroll(void 0===e.scrollToIndex||e.scrollToIndex<0)},t.prototype.componentWillUnmount=function(){window.removeEventListener("resize",this.updateOnResize),this.animationFrameRequestId&&window.cancelAnimationFrame(this.animationFrameRequestId),this.tileLoadLogger&&(clearInterval(this.logTrackingInterval),delete this.tileLoadLogger)},t.prototype.getRowHeight=function(e){if(void 0!==e&&this.rowHeights)return this.rowHeights[e];var t=this.state.tileWidth+this.props.tilePadding;return this.props.showLabels&&(t+=this.props.labelHeight+4),t},t.prototype.getPageHeight=function(){var e=document.documentElement.clientHeight||window.outerHeight,t=this.props.contentOffset||0,o=e-t,i=this.getRowHeight(),n=i*Math.ceil(o/i);return Math.max(n,i)},t.prototype.getAndUpdateTileLayout=function(){var e=this.props.maxTileWidth+this.props.tilePadding,t=r.findDOMNode(this);if(!t||0===t.clientWidth)return{tileWidth:this.state.tileWidth,tilesPerRow:this.props.tilesPerRow};var o=t.clientWidth,i=Math.max(1,Math.floor(o/e)),n=this.props.maxTileWidth;return o%e>1&&(i++,n=o/i-this.props.tilePadding),this.state.tileWidth!==n&&this.setState({tileWidth:n}),this.props.tilesPerRow!==i&&this.props.onTilesPerRowChange(i),{tileWidth:n,tilesPerRow:i}},t.prototype.setupTileLogging=function(e,t){var o=this.getPageHeight(),i=t*Math.ceil(o/e);this.tileLoadLogger=new d.InfiniteTileGridLogger(this.props.totalNumItems,i,t,this.handleTTI),this.tileLoadLogger.pagesToLog.add(0);var n=this.tileLoadLogger.getTimeNow();this.tileLoadLogger.startTimeByPage.set(0,n),this.logTrackingInterval=setInterval(this.setLastViewedPage,200,o)},t.prototype.translateRowRangeToItemRange=function(e,t){var o=this.itemRangeByRow;return[o[e][0],o[t][1]]},t.prototype.render=function(){var e=this;this.itemRangeByRow=[],this.rowHeights=[],this.tileIndexToRowIndex=[];var t=[],o=this.getRowHeight(),n=this.props,r=n.containerClass,a=n.enableMaxHeightGrouping,s=n.numThresholdRows,c=n.scrollDeltaThreshold,d=n.sectionStartIndices,u=n.sectionLabels,p=n.totalNumItems,f=n.window;if(d&&d.length>0)d.forEach(function(n,r){var l=p;r!==d.length-1&&(l=d[r+1]),e.rowHeights.push(32);var a=l-n,s=Math.ceil(a/e.props.tilesPerRow),c=u[r],f=i.default.createElement("div",{className:"tile-section-header",role:"heading","aria-level":2},c);t.push(f),e.itemRangeByRow.push([n,n]);for(var m=0;m<s;m++){var h=n+m*e.props.tilesPerRow,_=Math.min(h+e.props.tilesPerRow,l),g=[h,_];t.push(g),e.itemRangeByRow.push(g);for(var E=h;E<_;E++)e.tileIndexToRowIndex.push(e.rowHeights.length);e.rowHeights.push(o)}});else for(var m=Math.ceil(p/this.props.tilesPerRow),h=0;h<m;h++){var _=h*this.props.tilesPerRow,g=Math.min(_+this.props.tilesPerRow,p),E=[_,g];t.push(E),this.itemRangeByRow.push(E);for(var S=_;S<g;S++)this.tileIndexToRowIndex.push(this.rowHeights.length);this.rowHeights.push(o)}return i.default.createElement(l.CulledList,{enableMaxHeightGrouping:a,items:t,listItemHeight:this.rowHeights,itemBuffer:s,className:r,renderRow:this.renderRow,scrollThreshold:c,shouldUseWindowAsScrollContainer:!0,onRangeInView:this.handleRangeInView,tagName:"div",window:f})},t.defaultProps={enableMaxHeightGrouping:!1,numThresholdRows:10,tilePadding:16,tileHeight:160,maxTileWidth:160,labelHeight:40,logTileLoading:!1,scrollDeltaThreshold:1,showLabels:!0,getTileItem:function(){return null},handleTTI:function(){}},t})(i.default.PureComponent);t.InfiniteTileGrid=f}),define("modules/clean/react/path_filter_button",["require","exports","tslib","react","spectrum/dropdown_button","modules/clean/react/title_bubble","modules/clean/em_string","modules/clean/filepath"],function(e,t,o,i,n,r,l,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),a=o.__importStar(a),t.PathFilterButton=function(e){var t=e.path,o=e.defaultText,s=e.dropdownClasses,c=e.disabled,d=e.onClick,u=t&&!a.paths_are_equal(t,"/")?l.Emstring.em_snippet(a.filename(t),10,.6):null,p=i.default.createElement(n.DropdownButton,{className:s,disabled:c,onClick:d},u||o);return u?i.default.createElement(r.TitleBubble,{content:t,position:r.TitleBubble.POSITIONS.BOTTOM},p):p}}),define("modules/clean/react/selectable_list",["require","exports","tslib","external/immutable","external/keymaster","react","external/lodash","external/react-dom","modules/core/browser_detection"],function(e,t,o,i,n,r,l,a,s){"use strict";function c(e,t,o,i,n,r){if(void 0===r&&(r=!1),t<0||t>=o)return 0;n&&0!==n.length||(n=[0]);var a=l.sortedIndex(n,t),s=n[a]===t,c=s?a:a-1,d=n[c],u=(t-d)%i;switch(e){case m.NEXT_ROW:var p=n.length;if(c===p-1&&t+i>=o){var f=(t-d)%i,h=(o-d)%i;if(f<h||0===h)return r?o-1:t}var _=c+1,g=_<n.length?n[_]:o;if(t+i-(i-((g-d)%i||i))<g){var E=g-1;return Math.min(t+i,E)}var S=_+1<p?n[_+1]-1:o-1;return Math.min(g+u,S);case m.PREV_ROW:if(0===c&&t-i<0)return r?0:t;if(t-i>=d)return t-i;var v=n[c-1],y=d-1,b=d-v,T=v+b-(b%i||i);return Math.min(T+u,y)}}function d(e,t,o,i,n,r){switch(e){case m.PREV:return Math.max(0,t-1);case m.NEXT:return Math.min(o-1,t+1);case m.PREV_ROW:case m.NEXT_ROW:return c(e,t,o,i,n,r)}}function u(e,t,o,i,n,r,l,a,s){switch(e){case m.PREV:case m.PREV_ROW:if(0===t)return l;for(var c=d(e,t,a.length,o,s,!0),u=Math.min(t,i)-c,p=t-Math.max(c,i),f=r;f>r-p;f--){var h=l.indexOf(a[f]);l.splice(h,1)}for(var f=n-1;f>=n-u;f--)l.push(a[f]);break;case m.NEXT:case m.NEXT_ROW:if(t===a.length)return l;for(var _=d(e,t,a.length,o,s,!0),p=Math.min(_,i)-n,u=_-Math.max(t,i),f=n;f<n+p;f++){
var h=l.indexOf(a[f]);l.splice(h,1)}for(var f=r+1;f<=r+u;f++)l.push(a[f])}return l}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i),n=o.__importDefault(n),r=o.__importDefault(r),l=o.__importStar(l),a=o.__importStar(a),s=o.__importStar(s),t.SELECTABLE_LIST_KEY_SCOPE="SelectableList",t.SELECTABLE_TILE_GRID_KEY_SCOPE="SelectableTileGrid";var p,f="";(function(e){e.KEYBOARD="keyboard"})(p=t.SelectableListActionSource||(t.SelectableListActionSource={}));var m;(function(e){e[e.PREV=0]="PREV",e[e.NEXT=1]="NEXT",e[e.PREV_ROW=2]="PREV_ROW",e[e.NEXT_ROW=3]="NEXT_ROW"})(m=t.SelectDirection||(t.SelectDirection={}));var h;(function(e){e.DEFAULT="DEFAULT",e.EXTEND="EXTEND",e.ONLY="ONLY"})(h=t.SelectOptions||(t.SelectOptions={})),t.findNeighboringItem=d,t.findSelectionRange=u;var _=(function(e){function l(t){var o=e.call(this,t)||this;return o.isFocused=!1,o.handleSelectPrevious=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(m.PREV,p.KEYBOARD))},o.handleSelectPreviousRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(m.PREV_ROW,p.KEYBOARD))},o.handleExtendSelectionToPrevious=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(m.PREV,p.KEYBOARD))},o.handleExtendSelectionToPreviousRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(m.PREV_ROW,p.KEYBOARD))},o.handleSelectNext=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(m.NEXT,p.KEYBOARD))},o.handleSelectNextRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.selectNeighboringItem(m.NEXT_ROW,p.KEYBOARD))},o.handleExtendSelectionToNext=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(m.NEXT,p.KEYBOARD))},o.handleExtendSelectionToNextRow=function(e){o.isGlobalEvent(e)&&(e.preventDefault(),o.extendSelectionRange(m.NEXT_ROW,p.KEYBOARD))},o.handleKeyboardDeselectAll=function(e){var t=o.props.selection;e&&!o.isGlobalEvent(e)||!t.selected.size||o.handleDeselectAll(p.KEYBOARD)},o.handleDeselectAll=function(e){if(o.updateSelection([],e,!0),a.findDOMNode(o).contains(document.activeElement)){var t=document.activeElement;t.blur&&t.blur()}o.props.onDeselectAll&&o.props.onDeselectAll()},o.handleKeyboardSelectAll=function(e){var t=o.props,i=t.itemIds,n=t.selection;e&&!o.isGlobalEvent(e)||n.selected.size===i.length||o.handleSelectAll(p.KEYBOARD)},o.handleSelectAll=function(e){o.updateSelection(o.props.itemIds,e,!0)},o.handleDeselect=function(e,t,i){if(t)return o.extendOrShrinkSelectionByFile(e,i);o.updateSelectionById(e,"delete",i)},o.handleSelect=function(e,t,i){if(void 0===t&&(t=h.DEFAULT),t===h.EXTEND)return o.extendOrShrinkSelectionByFile(e);t===h.ONLY?o.updateSelection([e],i,!0):o.updateSelectionById(e,"add",i)},o.handleFocusFile=function(e){o.setState({focusedFileId:e})},o.isSelectableListEvent=function(){return o.isFocused},o.handleFocus=function(){o.isFocused=!0},o.handleBlur=function(){o.isFocused=!1},o.state={selection:t.selection,keyScope:t.keyScope},o}return o.__extends(l,e),l.prototype.componentWillReceiveProps=function(e){this.props.keyScope!==e.keyScope&&(this.setState({keyScope:e.keyScope}),this.isFocused=!1)},l.prototype.componentDidMount=function(){this.setupKeyboardShortcuts(),this.setFocusedIdFromSelection(this.props.selection)},l.prototype.componentDidUpdate=function(e,t){e.selection&&this.props.selection&&e.selection.anchor!==this.props.selection.anchor&&this.setFocusedIdFromSelection(this.props.selection),this.state.keyScope!==t.keyScope&&this.setupKeyboardShortcuts()},l.prototype.componentWillUnmount=function(){this.cleanupKeyboardShortcuts()},l.prototype.setupKeyboardShortcuts=function(){var e=this,o=this.state.keyScope;f=n.default.getScope(),f!==o&&n.default.setScope(o);var i=n.default.filter||function(e){var t=e.target||e.srcElement;if(!(t instanceof Element))return!0;var o=t.tagName;return!("INPUT"===o||"SELECT"===o||"TEXTAREA"===o)};n.default.filter=function(t){var o=t.target||t.srcElement,n=o.tagName;return(!e.isSelectableListEvent()||"BUTTON"!==n)&&(o instanceof HTMLInputElement&&"checkbox"===o.type||i.call(e,t))},o===t.SELECTABLE_LIST_KEY_SCOPE?(n.default("up",o,this.handleSelectPrevious),n.default("shift+up",o,this.handleExtendSelectionToPrevious),n.default("down",o,this.handleSelectNext),n.default("shift+down",o,this.handleExtendSelectionToNext)):o===t.SELECTABLE_TILE_GRID_KEY_SCOPE&&(n.default("left",o,this.handleSelectPrevious),n.default("shift+left",o,this.handleExtendSelectionToPrevious),n.default("right",o,this.handleSelectNext),n.default("shift+right",o,this.handleExtendSelectionToNext),n.default("up",o,this.handleSelectPreviousRow),n.default("shift+up",o,this.handleExtendSelectionToPreviousRow),n.default("down",o,this.handleSelectNextRow),n.default("shift+down",o,this.handleExtendSelectionToNextRow)),n.default("escape",o,this.handleKeyboardDeselectAll),s.mac?n.default("command+a",o,this.handleKeyboardSelectAll):n.default("ctrl+a",o,this.handleKeyboardSelectAll)},l.prototype.cleanupKeyboardShortcuts=function(){n.default.clearScope(this.state.keyScope),f&&n.default.setScope(f),n.default.resetFilter()},l.prototype.setFocusedIdFromSelection=function(e){e.anchor&&0!==e.selected.size&&this.setState({focusedFileId:e.anchor})},l.prototype.updateSelection=function(e,t,o){void 0===o&&(o=!1);var n=this.props.selection,r=o?e.length?e[0]:this.props.itemIds[0]:n.anchor,l=n.merge({selected:i.OrderedSet(e),anchor:r});this.props.onSelectionChange(l,t)},l.prototype.selectNeighboringItem=function(e,t){var o=this.props,i=o.itemIds,n=o.selection,r=o.tilesPerRow,l=o.sectionStartIndices,a=i.indexOf(n.selected.last()),s=d(e,a,i.length,r,l),c=i[s];this.setState({focusedFileId:c}),this.updateSelection([c],t,!0)},l.prototype.extendSelectionRange=function(e,t){var o=this.props,i=o.itemIds,n=o.selection,r=o.tilesPerRow,l=o.sectionStartIndices,a=n.anchor||i[0];if(a){var s=i.indexOf(n.selected.last()),c=n.selected.toArray(),d=i.indexOf(a),p=this.getRangeOfSelectedBlock(a);c=u(e,s,r,d,p.startIndex,p.endIndex,c,i,l),this.setState({focusedFileId:c[c.length-1]}),this.updateSelection(c,t)}},l.prototype.getRangeOfSelectedBlock=function(e){for(var t=this.props,o=t.itemIds,i=t.selection,n=o.indexOf(e),r=0,l=0;r=n,n--,!(n<0)&&i.selected.has(o[n]););for(n=r;;){var a=o[n];if(!a||!i.selected.has(a))break;l=n,n++}return{startIndex:r,endIndex:l}},l.prototype.extendOrShrinkSelectionByFile=function(e,t){var o=this.props,i=o.itemIds,n=o.selection,r=n.anchor||i[0];if(r){var l=i.indexOf(r),a=i.indexOf(e),s=this.getRangeOfSelectedBlock(r),c=s.startIndex,d=s.endIndex,u=[],p=[];i.forEach(function(e,t){c<=t&&t<=d&&u.push(e),(a<=t&&t<=l||l<=t&&t<=a)&&p.push(e)}),a<l&&p.reverse();var f=n.update("selected",function(e){return e.subtract(u).union(p)});this.setState({focusedFileId:e}),this.props.onSelectionChange(f,t)}},l.prototype.updateSelectionById=function(e,t,o){var i=this.props.selection,n="add"===t?e:i.anchor,r=i.selected[t](e),l=i.merge({selected:r,anchor:n||null});this.props.onSelectionChange(l,o)},l.prototype.isGlobalEvent=function(e){var t=e.target instanceof HTMLInputElement,o=e.target instanceof HTMLElement,i=t&&"checkbox"===e.target.type,n=o&&(e.target.classList.contains("mc-popover-selectable-item")||e.target.classList.contains("mc-popover-content-item")||e.target.classList.contains("mc-popover-trigger"));return!document.activeElement||document.activeElement===document.body||e.target instanceof Element&&(a.findDOMNode(this).contains(e.target)&&(!t||i)&&!n)},l.prototype.render=function(){var e=this.props.children,t=this.state.focusedFileId;if(!e)return null;var o=e;return"function"==typeof e&&(o=e({focusedFileId:t,handleDeselect:this.handleDeselect,handleDeselectAll:this.handleDeselectAll,handleFocusFile:this.handleFocusFile,handleSelect:this.handleSelect,handleSelectAll:this.handleSelectAll,isSelectableListEvent:this.isSelectableListEvent})),r.default.createElement("div",{onBlur:this.handleBlur,onFocus:this.handleFocus},o)},l})(r.default.PureComponent);t.SelectableList=_}),define("modules/clean/react/tree_view",["require","exports","tslib","external/classnames","external/immutable","react","external/react-dom","external/lodash","modules/clean/react/icon/folder_icon","spectrum/icon_content","jquery","modules/clean/ajax","modules/clean/em_string","modules/clean/filepath","modules/clean/keycode","modules/clean/react/css","modules/clean/react/sprite","modules/core/i18n","modules/core/notify"],function(e,t,o,i,n,r,l,a,s,c,d,u,p,f,m,h,_,g,E){"use strict";function S(e,t,o){var i={ns_id:o,ns_path:t,hide_tmfs:!0};return u.WebRequestOref({url:"/browse_util/tree_view_team_folder_contents",type:"POST",subject_user:e,data:i,dataType:"json"})}function v(e){var t=e.mkAjaxRequest||function(t){return S(e.userId,t,e.rootNSID)};return r.default.createElement(P,o.__assign({},e,{rootIcon:O.DROPBOX,mkAjaxRequest:t}))}function y(e,t){var o={folder:t};return u.WebRequestOref({url:"/browse_util/tree_view_folders",type:"POST",subject_user:e,data:o,dataType:"json"})}function b(e){var t=e.mkAjaxRequest||function(t){return y(e.user.id,t)},i=e.forceRootSelectable||"edit"===e.user.user_root_permissions,n=e.is_paired?e.user.is_team?O.BRIEFCASE:O.HOUSE:O.DROPBOX,l=o.__assign({},e,{mkAjaxRequest:t,isRootSelectable:i,rootIcon:n});if(e.user.is_cdm_member){var a=e.user.cdm_tmf_path;return r.default.createElement(A,o.__assign({},l,{pinnedFolder:a}))}return r.default.createElement(P,o.__assign({},l))}Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importDefault(i),n=o.__importStar(n),r=o.__importDefault(r),l=o.__importStar(l),a=o.__importStar(a),d=o.__importDefault(d),u=o.__importStar(u),t.MAX_LABEL_LENGTH=20,t.INDENT_SIZE_PX=15;var T;(function(e){e[e.None=0]="None",e[e.TreeItem=1]="TreeItem",e[e.HeaderItem=2]="HeaderItem",e[e.StaticHeader=3]="StaticHeader"})(T=t.RootStyle||(t.RootStyle={}));var I=(function(){function e(e){this.key=e.key,this.label=e.label?e.label:"",this.icon=e.icon?e.icon:"",this.disabled=!!e.disabled,this.canExpand=!!e.canExpand,this.forceExpanded=!!e.forceExpanded}return e})();t.TreeItem=I;var w=(function(){function e(e){var t=n.Map();this.rootItem=e.rootItem,this.items=e.items,this.childItemsByParentKey=e.childItemsByParentKey||t,this.parentItemByChildKey=e.parentItemByChildKey||n.Map()}return e.createWithRootItem=function(t){return new e({rootItem:t,items:n.Map([[t.key,t]])})},e.prototype.getParentItem=function(e){if(e){var t=this.parentItemByChildKey.get(e.key);return t?this.items.get(t):null}},e.prototype.getChildItems=function(e){return this.childItemsByParentKey.get(e.key)||null},e.prototype.isParent=function(e){return this.childItemsByParentKey.has(e.key)},e.prototype.setChildItems=function(t,o){o=n.List(o);var i=n.Map(o.map(function(e){return[e.key,e]})),r=n.Map(this.items).merge(i),l=n.Map(this.childItemsByParentKey).set(t.key,o),a=n.Map(this.parentItemByChildKey);return o.forEach(function(e){return a=a.set(e.key,t.key)}),new e({rootItem:this.rootItem,items:r,childItemsByParentKey:l,parentItemByChildKey:a})},e})();t.Tree=w;var L=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.render=function(){return r.default.createElement("ul",{className:"tree-view__group",role:"group"},this.props.children)},t})(r.default.Component),F=(function(e){function n(){var t=null!==e&&e.apply(this,arguments)||this;return t.handleClick=function(e){if(e.preventDefault(),e.stopPropagation(),!t.props.item.disabled){var o=l.findDOMNode(t.refs.expandButton);o&&o.contains(e.target)||t.props.onClick&&t.props.onClick(t.props.item)}},t.handleExpandClick=function(e){e.preventDefault(),t.props.onExpandButtonClick&&t.props.onExpandButtonClick(t.props.item,!t.props.isExpanded)},t}return o.__extends(n,e),n.prototype.renderExpandButton=function(){return r.default.createElement("div",{className:"tree-view__expand-button",onClick:this.handleExpandClick,ref:"expandButton",role:"button"},r.default.createElement(_.Sprite,{group:"web",name:this.props.isExpanded?"bullet_minus":"bullet_plus",alt:this.props.isExpanded?g._("Collapse"):g._("Expand")}))},n.prototype.renderIcon=function(){var e=this.props.item,t=e.icon,o=e.disabled;return r.default.createElement("div",{className:"tree-view__icon-wrapper"},r.default.createElement(c.IconContent,{className:"tree-view__item-icon",name:s.convertLegacyFolderIconToSpectrum(t,"small"),disabled:o,height:19,width:19}))},n.prototype.render=function(){var e=!this.props.canExpand,o=i.default({"tree-view__item":!0,"tree-view__item--leaf":e}),n=this.props.canExpand&&!this.props.showAsHeader;return r.default.createElement("li",{key:this.props.item.key,id:this.props.id,className:o,onClick:this.handleClick,role:"treeitem","aria-disabled":this.props.item.disabled,"aria-label":this.props.item.label,"aria-level":this.props.level+1,"aria-selected":!!this.props.isSelected||void 0,"aria-expanded":n?this.props.isExpanded:void 0},r.default.createElement("span",{className:i.default({"tree-view__item-row":!0,"tree-view__item-row--disabled":this.props.item.disabled}),style:{paddingLeft:this.props.showAsHeader?0:this.props.level*t.INDENT_SIZE_PX}},this.props.showAsHeader||e?void 0:this.renderExpandButton(),this.props.item.icon?this.renderIcon():void 0,this.props.item.label?r.default.createElement("span",{className:"tree-view__item-label"},p.Emstring.em_snippet(this.props.item.label,t.MAX_LABEL_LENGTH)):void 0),this.props.children)},n.defaultProps={isSelected:!1,isExpanded:!1,canExpand:!1,level:0,onClick:a.noop,onExpandButtonClick:a.noop,showAsHeader:!1},n})(r.default.Component);t.TreeItemView=F;var C=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.renderIcon=function(){return this.props.item.icon?r.default.createElement(_.Sprite,{className:"tree-view__header-icon",group:"web",name:this.props.item.icon,alt:""}):null},t.prototype.render=function(){return r.default.createElement("div",{className:"tree-view__item-row"},this.renderIcon(),r.default.createElement("h3",{className:"tree-view__header",id:this.props.id},this.props.item.label))},t})(r.default.Component),R=(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.state={selectedItemKey:null,expandedItemKeys:n.Set([t.props.tree.rootItem.key]),showFocused:!1},t.selectItem=function(e){t.setState({selectedItemKey:null!=e&&e.key?e.key:null}),t.props.onItemSelected(e)},t.handleExpandButtonClick=function(e,o){t.setState({expandedItemKeys:t.setItemExpanded(e.key,o)}),t.props.onItemExpanded(e,o)},t.handleKeyDown=function(e){switch(e.which){case m.KeyCode.UP:t.advanceSelection(!0)&&e.preventDefault();break;case m.KeyCode.DOWN:t.advanceSelection(!1)&&e.preventDefault();break;case m.KeyCode.RIGHT:if(null!=t.state.selectedItemKey){var o=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(o)&&(t.handleExpandButtonClick(o,!0),e.preventDefault())}break;case m.KeyCode.LEFT:if(t.state.selectedItemKey){var o=t.props.tree.items.get(t.state.selectedItemKey);t.canItemExpand(o)&&(t.handleExpandButtonClick(o,!1),e.preventDefault())}}},t.handleOnFocus=function(){return t.setState({showFocused:!0})},t.handleOnBlur=function(){return t.setState({showFocused:!1})},t}return o.__extends(t,e),t.prototype.componentDidMount=function(){d.default(l.findDOMNode(this)).on({keydown:this.handleKeyDown})},t.prototype.componentWillReceiveProps=function(e){e.resetSelectedItem&&e.resetSelectedItem!==this.props.resetSelectedItem&&this.setState({selectedItemKey:null})},t.prototype.componentWillUnmount=function(){d.default(l.findDOMNode(this)).off("keydown")},t.prototype.componentDidUpdate=function(e,t){if(this.state.selectedItemKey&&this.state.selectedItemKey!==t.selectedItemKey){var o=d.default(l.findDOMNode(this)),i=o.find('[aria-selected="true"]').eq(0);i.length&&this.scrollElementIntoViewIfNeeded(i,o)}},t.prototype.scrollElementIntoViewIfNeeded=function(e,t){var o=t.scrollTop(),i=o+e.position().top;if(i-o<0)return void t.scrollTop(i);var n=t.innerHeight(),r=o+n,l=e.innerHeight();i+l>r&&t.scrollTop(i-n+l)},t.prototype.hasSelectableRootItem=function(){var e=this.props.rootStyle;return e===T.TreeItem||e===T.HeaderItem},t.prototype.getHTMLIdPrefix=function(){return this.HTMLIdPrefix||(this.HTMLIdPrefix="tree-view-"+Math.floor(16777215*Math.random()).toString(16))},t.prototype.getLastLeafOf=function(e){var t=this.props.tree.getChildItems(e);return this.state.expandedItemKeys.contains(e.key)&&null!=t&&t.size>0?this.getLastLeafOf(t.last()):e},t.prototype.getPrevItem=function(e){if(!e)return null;var t=this.props.tree.getParentItem(e);if(!t)return null;var o=this.props.tree.getChildItems(t),i=o.indexOf(e);if(i>0)return this.getLastLeafOf(o.get(i-1));if(0===i){return t===this.props.tree.rootItem&&!this.hasSelectableRootItem()?null:t}return null},t.prototype.getNextItem=function(e,t){if(void 0===t&&(t=!0),!e)return null;var o=this.state.expandedItemKeys.contains(e.key),i=o&&this.props.tree.isParent(e);if(t&&i)return this.props.tree.getChildItems(e).first();var n=this.props.tree.getParentItem(e);if(!n)return null;var r=this.props.tree.getChildItems(n),l=r.size-1,a=r.indexOf(e);return a===l?this.getNextItem(n,!1):0<=a&&a<l?r.get(a+1)||null:null},t.prototype.advanceSelection=function(e){if(void 0===e&&(e=!1),!this.state.selectedItemKey){var t=void 0;if(this.hasSelectableRootItem())t=this.props.tree.rootItem;else{var o=this.props.tree.getChildItems(this.props.tree.rootItem);t=o?o.first():null}return this.selectItem(t),!0}var i=this.props.tree.items.get(this.state.selectedItemKey),n=e?this.getPrevItem(i):this.getNextItem(i);return!!n&&(this.selectItem(n),!0)},t.prototype.getValidHTMLIdForItem=function(e){return(""+this.getHTMLIdPrefix()+e.key).replace(/\s+/g,"_")},t.prototype.setItemExpanded=function(e,t){return t?this.state.expandedItemKeys.add(e):this.state.expandedItemKeys.delete(e)},t.prototype.canItemExpand=function(e){return e&&(e.canExpand||this.props.tree.isParent(e))},t.prototype.renderSingleItem=function(e,t,i,n){void 0===n&&(n={});var l=o.__assign({id:this.getValidHTMLIdForItem(e),key:e.key,item:e,isSelected:this.state.selectedItemKey===e.key,isExpanded:this.state.expandedItemKeys.contains(e.key)||e.forceExpanded,canExpand:this.canItemExpand(e)&&!e.forceExpanded,level:t,onClick:this.selectItem,onExpandButtonClick:this.handleExpandButtonClick},n),a=this.props.treeItemView;return r.default.createElement(a,o.__assign({},l),i)},t.prototype.renderItemAndDescendants=function(e,t){var o,i=this.state.expandedItemKeys.contains(e.key)||e.forceExpanded;return this.props.tree.isParent(e)&&i&&(o=this.renderChildrenOfItemAsGroup(e,t+1)),this.renderSingleItem(e,t,o)},t.prototype.renderChildrenOfItemAsGroup=function(e,t){var o=this;if(!e||!this.props.tree.isParent(e))return null;var i=this.props.tree.getChildItems(e).map(function(e){return o.renderItemAndDescendants(e,t)});return r.default.createElement(L,null,i.toJS())},t.prototype.render=function(){var e,t,o,n=this.props.tree.rootItem;if(this.props.rootStyle===T.TreeItem)t=r.default.createElement(L,null,this.renderItemAndDescendants(n,0));else if(this.props.rootStyle===T.HeaderItem)e=this.getValidHTMLIdForItem(n),t=r.default.createElement(L,null,this.renderSingleItem(n,0,null,{showAsHeader:!0,id:e}),this.renderChildrenOfItemAsGroup(n,0));else if(this.props.rootStyle===T.StaticHeader)e=this.getValidHTMLIdForItem(n),t=r.default.createElement(L,null,r.default.createElement(C,{item:n,id:e}),this.renderChildrenOfItemAsGroup(n,0));else{if(this.props.rootStyle!==T.None)throw new Error("Unknown root style: "+this.props.rootStyle);t=this.renderChildrenOfItemAsGroup(this.props.tree.rootItem,0)}if(this.state.selectedItemKey){var l=this.props.tree.items.get(this.state.selectedItemKey);o=this.getValidHTMLIdForItem(l)}return r.default.createElement("div",{role:"tree",tabIndex:0,onFocus:this.handleOnFocus,onBlur:this.handleOnBlur,className:i.default("tree-view","ax-focusable",{"is-focused":this.state.showFocused}),"aria-labelledby":e?e:void 0,"aria-activedescendant":o},t,this.props.children)},t.defaultProps={rootStyle:T.None,onItemSelected:function(e){},onItemExpanded:function(e,t){},treeItemView:F},t})(r.default.Component);t.TreeView=h.requireCssWithComponent(R,["/static/css/react/tree_view-vflJs4_j4.css","/static/css/accessibility-vfliGZNRm.css"]);var O;(function(e){e.BRIEFCASE="s_briefcase",e.HOUSE="s_house",e.DROPBOX="dropbox"})(O=t.RootIcon||(t.RootIcon={}));var D=(function(e){function t(t,o){var i=e.call(this,t)||this;return i.folderNsId=o,i}return o.__extends(t,e),t})(I);t.FolderTreeItem=D;var N=function(e){return new D({key:e.path,label:f.filename(e.path),canExpand:e.has_subdirs,icon:e.icon,disabled:e.read_only},e.contained_ns)},M=(function(e){function i(){var t=null!==e&&e.apply(this,arguments)||this;return t._pendingAjaxRequest=null,t.state={showLoadingScreen:!1,tree:w.createWithRootItem(new I({key:"/",icon:t.props.rootIcon,label:t.props.treeRootName}))},t.asyncFetchSubFoldersForItem=function(e){var o=e===t.state.tree.rootItem;o&&t.setState({showLoadingScreen:!0}),t._pendingAjaxRequest&&t._pendingAjaxRequest.abort(),t._pendingAjaxRequest=t.props.mkAjaxRequest(e.key),Promise.resolve(t._pendingAjaxRequest).then(function(o){var i=t.parseFolderList(o),n=t.state.tree.setChildItems(e,i);t.setState({tree:n})}).catch(t.props.handleError).then(function(){if(null!=t._pendingAjaxRequest){t._pendingAjaxRequest=null,o&&(t.props.isLoadingAdditionalData||t.setState({showLoadingScreen:!1}));var e=l.findDOMNode(t.refs.treeView);e&&e.focus()}})},t.handleItemSelected=function(e){e instanceof D?t.props.onFolderSelected(e.key,e.folderNsId):t.props.onFolderSelected(e.key)},t.handleExpandButtonClick=function(e,o){o&&!t.state.tree.isParent(e)&&t.asyncFetchSubFoldersForItem(e)},t.renderLoadingMessage=function(){return r.default.createElement("span",{className:"tree-view__loading-label"},g._("Loading your folders…"))},t}return o.__extends(i,e),i.prototype.componentDidMount=function(){this.asyncFetchSubFoldersForItem(this.state.tree.rootItem)},i.prototype.componentWillReceiveProps=function(e){e.isLoadingAdditionalData||e.isLoadingAdditionalData===this.props.isLoadingAdditionalData||this.setState({showLoadingScreen:!1})},i.prototype.componentWillUnmount=function(){this._pendingAjaxRequest&&(this._pendingAjaxRequest.abort(),this._pendingAjaxRequest=null)},i.prototype.parseFolderList=function(e){return e.map(N)},i.prototype.render=function(){var e=this.props.isRootSelectable?T.HeaderItem:T.StaticHeader;return r.default.createElement(t.TreeView,{ref:"treeView",tree:this.state.tree,rootStyle:e,onItemSelected:this.handleItemSelected,onItemExpanded:this.handleExpandButtonClick,resetSelectedItem:this.props.resetSelectedItem},this.state.showLoadingScreen?this.renderLoadingMessage():void 0)},i.defaultProps={onFolderSelected:function(e,t){},handleError:function(e){E.Notify.error(g._("An error occurred while trying to load your folder."))}},i})(r.default.Component),P=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t})(M);t.FolderTreeView=P;var A=(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.parseFolderList=function(e){var t=this,o=-1,i=e.map(function(e,i){var n=e.path;return t.props.pinnedFolder&&n===t.props.pinnedFolder&&(o=i),N(e)});if(o!==-1){var n=i[o];i.splice(o,1),i.unshift(n)}return i},t})(M);t.PinnedFolderTreeView=A,t.AdminFolderTreeView=v,t.UserFolderTreeView=b}),define("modules/clean/sharing/avatar_info",["require","exports","tslib","modules/core/user_i18n"],function(e,t,o,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),i=o.__importStar(i);var n=function(e){switch(e){case"reader":return"viewer";case"writer":return"editor";case"owner":return"owner";default:return"default"}};t.apiUserMemberToAvatarInfo=function(e){var t=e.displayName()||"",o=e.email()||"";return{access_type:n(e.access_type),display_name:t,familiar_name:null!=e.account?e.account.familiar_name:void 0,initials:null!=e.initials?e.initials:i.getInitials(t),photo_url:null!=e.account?e.account.profile_photo_url:void 0,user_id:e.memberId(),email:o,account_id:e.account_id}},t.apiGroupMemberToAvatarInfo=function(e){return{access_type:n(e.access_type),gid:e.memberId(),is_automatic:"team"===e.group_type,name:e.displayName(),num_users:e.member_count}},t.apiInviteeMemberToAvatarInfo=function(e){return{access_type:n(e.access_type),invitation_id:e.memberId(),email_or_fbname:e.displayName()}}});
//# sourceMappingURL=pkg-selectable-list.min.js-vfl19BV0P.map