define(["require","exports"],function(e,t){"use strict";function a(e){var t=function(e,t){if(void 0===e)return!0;var a=e;for(var n in a)if(String(t[n])!==String(a[n]))return!1;return!0},a=function(e,a){return void 0===e||t(e.extra,a.extra)};if("undefined"!=typeof self&&self){var n,r=self._DBX_UX_variants_configStore,i={};if(e&&r&&r.matchers&&e.eventName&&(n=r.matchers[e.eventName]))for(var s in n)if(r.assignments&&n.hasOwnProperty(s)){var o=n[s],f=void 0;f=r.assignments[o.feature_name],f&&void 0===i[f.variantToken]&&a(o.like,e)&&(e.extra||(e.extra={}),e.extra.variants?e.extra.variants+=","+f.variantToken:e.extra.variants=f.variantToken,i[f.variantToken]=!0)}}}function n(e){if(e){self._DBX_UX_variants_configStore=self._DBX_UX_variants_configStore||{};var a=self._DBX_UX_variants_configStore,n=e.variant_tokens,r=e.matchers,i=function(e){return atob(e.split("_").join("/").split("-").join("+"))},s=function(e){return decodeURIComponent(escape(e))};if(n)for(var o=0,f=n.split(",");o<f.length;o++){var v=f[o],_=v.split(".").map(i),c=_[0],m=_[1],u=_[2];if(u){var l=JSON.parse(s(c));if("JWT"===l.typ){var g=JSON.parse(s(m)),p=g.variants,d=g.iss;if(p&&d===t.DROPBOX_VARIANTS_ISSUER)for(var S=0,h=p.split(",");S<h.length;S++){var X=h[S],x=X.split(":"),O=x[0],k=x[1];a.assignments=a.assignments||{},a.assignments[O]={variant:k,variantToken:v}}}}}if(r)for(var T=0,U=r;T<U.length;T++){var B=U[T];a.matchers=a.matchers||{};var D=B.event_name;a.matchers[D]=a.matchers[D]||{};var N={feature_name:B.feature_name,event_name:D,is_pre_tti:B.is_pre_tti,like:B.like},R=JSON.stringify(N);a.matchers[D][R]=N}}}function r(e){var t=self._DBX_UX_variants_configStore;return(t&&t.assignments&&t.assignments[e]||{}).variant||"OFF"}Object.defineProperty(t,"__esModule",{value:!0});t.DROPBOX_VARIANTS_ISSUER="https://dropbox.com/ux_analytics",t.addMatchedVariantsToEvent=a,t.addConfig=n,t.getVariant=r});
//# sourceMappingURL=ux_variants.min.js-vflA9IENT.map